<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Wavelength: src/chat/files/audio/decoder/audio_decoder.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Wavelength
   </div>
   <div id="projectbrief">Privacy-focused, cross-platform, and open-source communication application</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('audio__decoder_8h_source.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">audio_decoder.h</div></div>
</div><!--header-->
<div class="contents">
<a href="audio__decoder_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="preprocessor">#ifndef AUDIO_DECODER_H</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="preprocessor">#define AUDIO_DECODER_H</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span> </div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="preprocessor">#ifdef _MSC_VER</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="preprocessor">#pragma comment(lib, &quot;swresample.lib&quot;)</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span> </div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="preprocessor">#include &lt;QAudioFormat&gt;</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#include &lt;QMutex&gt;</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="preprocessor">#include &lt;QObject&gt;</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="preprocessor">#include &lt;QThread&gt;</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="preprocessor">#include &lt;QWaitCondition&gt;</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span> </div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="keyword">class </span>QIODevice;</div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="keyword">class </span>QAudioOutput;</div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span> </div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &lt;libavcodec/avcodec.h&gt;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &lt;libavformat/avformat.h&gt;</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#include &lt;libswresample/swresample.h&gt;</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span>}</div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span></div>
<div class="foldopen" id="foldopen00033" data-start="{" data-end="};">
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno"><a class="line" href="classAudioDecoder.html">   33</a></span><span class="keyword">class </span><a class="code hl_function" href="classAudioDecoder.html#a5cf09a96a04ce8afd751d985c71e4211">AudioDecoder</a> final : <span class="keyword">public</span> QThread {</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>    Q_OBJECT</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span> </div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="keyword">public</span>:</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>    <span class="keyword">explicit</span> <a class="code hl_function" href="classAudioDecoder.html#a5cf09a96a04ce8afd751d985c71e4211">AudioDecoder</a>(<span class="keyword">const</span> QByteArray &amp;audio_data, QObject *parent = <span class="keyword">nullptr</span>);</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>    <a class="code hl_function" href="classAudioDecoder.html#a6889d988c02106b114434bd895825c39">~AudioDecoder</a>() <span class="keyword">override</span>;</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classAudioDecoder.html#ad1c938bcc5cb7becf9d08865a1c09409">ReleaseResources</a>();</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span></div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="classAudioDecoder.html#a6948c3168d8c0c5a3badeeacf88f59bc">Reinitialize</a>();</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span></div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classAudioDecoder.html#ae6bd0a0ddcf485aba6305427d4bd6825">SetVolume</a>(<span class="keywordtype">float</span> volume) <span class="keyword">const</span>;</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span></div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>    <span class="keywordtype">float</span> <a class="code hl_function" href="classAudioDecoder.html#a56929dd4cbe490ee87de77ffbfc3aed2">GetVolume</a>() <span class="keyword">const</span>;</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span></div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="classAudioDecoder.html#a412416ae8d5a2153c14c6023a47ceb52">Initialize</a>();</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span></div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classAudioDecoder.html#acb57c6389129229b4811f9221b91e8bd">Stop</a>();</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span></div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classAudioDecoder.html#ab41cfff77a236e3233a38406a3a4296a">Pause</a>();</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span></div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="classAudioDecoder.html#ab3e259ddc9fb0a51545b3fdfe7920f00">IsPaused</a>() <span class="keyword">const</span>;</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span></div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classAudioDecoder.html#a2c52b21ceb52a95eae7f59bd012acfe6">Seek</a>(<span class="keywordtype">double</span> position);</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span></div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classAudioDecoder.html#a06293e1d80073603f552f0af4204b147">Reset</a>();</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span></div>
<div class="foldopen" id="foldopen00135" data-start="{" data-end="}">
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno"><a class="line" href="classAudioDecoder.html#a96c08186bab0125103062637bb881ec5">  135</a></span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="classAudioDecoder.html#a96c08186bab0125103062637bb881ec5">IsDecoderRunning</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>        <span class="keywordflow">return</span> isRunning();</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>    }</div>
</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span> </div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>signals:</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno"><a class="line" href="classAudioDecoder.html#a4c483a41bf7d57354b63bec009ac222e">  144</a></span>    <span class="keywordtype">void</span> <a class="code hl_signal" href="classAudioDecoder.html#a4c483a41bf7d57354b63bec009ac222e">error</a>(<span class="keyword">const</span> QString &amp;message);</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span></div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno"><a class="line" href="classAudioDecoder.html#a70ae7be45d270a97159bd5f6c36c2ad8">  152</a></span>    <span class="keywordtype">void</span> <a class="code hl_signal" href="classAudioDecoder.html#a70ae7be45d270a97159bd5f6c36c2ad8">audioInfo</a>(<span class="keywordtype">int</span> sample_rate, <span class="keywordtype">int</span> channels, <span class="keywordtype">double</span> duration);</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span></div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno"><a class="line" href="classAudioDecoder.html#a4f5e8f4dd5f45b60bc5ed68ccd8a90c3">  157</a></span>    <span class="keywordtype">void</span> <a class="code hl_signal" href="classAudioDecoder.html#a4f5e8f4dd5f45b60bc5ed68ccd8a90c3">playbackFinished</a>();</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span></div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno"><a class="line" href="classAudioDecoder.html#a928f569d98a91fae0fa27371a0c85b4e">  163</a></span>    <span class="keywordtype">void</span> <a class="code hl_signal" href="classAudioDecoder.html#a928f569d98a91fae0fa27371a0c85b4e">positionChanged</a>(<span class="keywordtype">double</span> position);</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span> </div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span><span class="keyword">protected</span>:</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classAudioDecoder.html#a46043f6510cb80d1c4c14a18f23ecee2">run</a>() <span class="keyword">override</span>;</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span></div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="classAudioDecoder.html#a66c187d6a3c0e49bf1be0ead9be415a5">DecodeAudioFrame</a>(<span class="keyword">const</span> AVFrame *audio_frame) <span class="keyword">const</span>;</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span> </div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span><span class="keyword">private</span>:</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>    <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code hl_function" href="classAudioDecoder.html#afbc8e3bdffc473d8ca7a059dc30ce268">ReadPacket</a>(<span class="keywordtype">void</span> *opaque, uint8_t *buf, <span class="keywordtype">int</span> buf_size);</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span></div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>    <span class="keyword">static</span> int64_t <a class="code hl_function" href="classAudioDecoder.html#a5f63aa27abafaeded80d3688638ace64">SeekPacket</a>(<span class="keywordtype">void</span> *opaque, int64_t offset, <span class="keywordtype">int</span> whence);</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span></div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno"><a class="line" href="classAudioDecoder.html#a1d133c4a8a68d36ac504b27152c3301f">  208</a></span>    QByteArray <a class="code hl_variable" href="classAudioDecoder.html#a1d133c4a8a68d36ac504b27152c3301f">audio_data_</a>;</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno"><a class="line" href="classAudioDecoder.html#ad0e74c589757bc53b9c1a72fb61f936e">  210</a></span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="classAudioDecoder.html#ad0e74c589757bc53b9c1a72fb61f936e">read_position_</a> = 0;</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span></div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno"><a class="line" href="classAudioDecoder.html#a56d6ac5c37e7b5cffa1d913d5f7b6d01">  213</a></span>    AVFormatContext *<a class="code hl_variable" href="classAudioDecoder.html#a56d6ac5c37e7b5cffa1d913d5f7b6d01">format_context_</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno"><a class="line" href="classAudioDecoder.html#a8bc32886b0f43760450dbfcfc5e92082">  215</a></span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="classAudioDecoder.html#a8bc32886b0f43760450dbfcfc5e92082">audio_stream_</a> = -1;</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno"><a class="line" href="classAudioDecoder.html#a2c7cb37d97e97fdf6a93c17f8cd96516">  217</a></span>    AVCodecContext *<a class="code hl_variable" href="classAudioDecoder.html#a2c7cb37d97e97fdf6a93c17f8cd96516">audio_codec_context_</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno"><a class="line" href="classAudioDecoder.html#ada7a06c4f71585633dbf9246c82564ca">  219</a></span>    SwrContext *<a class="code hl_variable" href="classAudioDecoder.html#ada7a06c4f71585633dbf9246c82564ca">swr_context_</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno"><a class="line" href="classAudioDecoder.html#ab37425fc11616e98c4bb7ef38d42ebcb">  221</a></span>    AVFrame *<a class="code hl_variable" href="classAudioDecoder.html#ab37425fc11616e98c4bb7ef38d42ebcb">audio_frame_</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno"><a class="line" href="classAudioDecoder.html#a85648b024afb18583f516409b73c4ade">  223</a></span>    AVIOContext *<a class="code hl_variable" href="classAudioDecoder.html#a85648b024afb18583f516409b73c4ade">io_context_</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno"><a class="line" href="classAudioDecoder.html#af047c294f38efb8e18203b05f3c258b0">  225</a></span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="classAudioDecoder.html#af047c294f38efb8e18203b05f3c258b0">io_buffer_</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span></div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno"><a class="line" href="classAudioDecoder.html#a1de7f54ae1cd81c77c546ee7b129c3cf">  228</a></span>    QAudioOutput *<a class="code hl_variable" href="classAudioDecoder.html#a1de7f54ae1cd81c77c546ee7b129c3cf">audio_output_</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno"><a class="line" href="classAudioDecoder.html#a5a7db5853b0a13ceb2551114ecebff01">  230</a></span>    QIODevice *<a class="code hl_variable" href="classAudioDecoder.html#a5a7db5853b0a13ceb2551114ecebff01">audio_device_</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno"><a class="line" href="classAudioDecoder.html#acc0ec0af4f9b1d462e024ec666c18ae3">  232</a></span>    QAudioFormat <a class="code hl_variable" href="classAudioDecoder.html#acc0ec0af4f9b1d462e024ec666c18ae3">audio_format_</a>;</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span></div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno"><a class="line" href="classAudioDecoder.html#a0a8437105be8d9cc228e85554aa8aa7d">  235</a></span>    <span class="keyword">mutable</span> QMutex <a class="code hl_variable" href="classAudioDecoder.html#a0a8437105be8d9cc228e85554aa8aa7d">mutex_</a>;</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno"><a class="line" href="classAudioDecoder.html#a22151d6b4208360dcebe8ad345f52df4">  237</a></span>    QWaitCondition <a class="code hl_variable" href="classAudioDecoder.html#a22151d6b4208360dcebe8ad345f52df4">wait_condition_</a>;</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno"><a class="line" href="classAudioDecoder.html#a13ec1b348292b069500c2d2cf965f710">  239</a></span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="classAudioDecoder.html#a13ec1b348292b069500c2d2cf965f710">stopped_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno"><a class="line" href="classAudioDecoder.html#ad9d96652dd346dfa69aadf4ce9c77dee">  241</a></span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="classAudioDecoder.html#ad9d96652dd346dfa69aadf4ce9c77dee">paused_</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno"><a class="line" href="classAudioDecoder.html#aa65c7d2e593ea818e894281a7fb70592">  243</a></span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="classAudioDecoder.html#aa65c7d2e593ea818e894281a7fb70592">seeking_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno"><a class="line" href="classAudioDecoder.html#a213abc3ab9b148b2882fc6ed40e62758">  245</a></span>    int64_t <a class="code hl_variable" href="classAudioDecoder.html#a213abc3ab9b148b2882fc6ed40e62758">seek_position_</a> = 0;</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno"><a class="line" href="classAudioDecoder.html#a7f2593257411d545771e2c6f786fe805">  247</a></span>    <span class="keywordtype">double</span> <a class="code hl_variable" href="classAudioDecoder.html#a7f2593257411d545771e2c6f786fe805">current_position_</a> = 0;</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno"><a class="line" href="classAudioDecoder.html#a3f16fcfb1303426c4f870a7cb65c9509">  249</a></span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="classAudioDecoder.html#a3f16fcfb1303426c4f870a7cb65c9509">reached_end_of_stream_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno"><a class="line" href="classAudioDecoder.html#ab9f4ee308d03bd9120488f300dc9ed55">  251</a></span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="classAudioDecoder.html#ab9f4ee308d03bd9120488f300dc9ed55">initialized_</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>};</div>
</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span> </div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span><span class="preprocessor">#endif </span><span class="comment">// AUDIO_DECODER_H</span></div>
<div class="ttc" id="aclassAudioDecoder_html_a06293e1d80073603f552f0af4204b147"><div class="ttname"><a href="classAudioDecoder.html#a06293e1d80073603f552f0af4204b147">AudioDecoder::Reset</a></div><div class="ttdeci">void Reset()</div><div class="ttdoc">Resets the playback position to the beginning (0 seconds). Seeks the FFmpeg format context,...</div><div class="ttdef"><b>Definition</b> audio_decoder.cpp:297</div></div>
<div class="ttc" id="aclassAudioDecoder_html_a0a8437105be8d9cc228e85554aa8aa7d"><div class="ttname"><a href="classAudioDecoder.html#a0a8437105be8d9cc228e85554aa8aa7d">AudioDecoder::mutex_</a></div><div class="ttdeci">QMutex mutex_</div><div class="ttdoc">Mutex protecting access to shared state variables from different threads.</div><div class="ttdef"><b>Definition</b> audio_decoder.h:235</div></div>
<div class="ttc" id="aclassAudioDecoder_html_a13ec1b348292b069500c2d2cf965f710"><div class="ttname"><a href="classAudioDecoder.html#a13ec1b348292b069500c2d2cf965f710">AudioDecoder::stopped_</a></div><div class="ttdeci">bool stopped_</div><div class="ttdoc">Flag indicating if the thread should stop execution.</div><div class="ttdef"><b>Definition</b> audio_decoder.h:239</div></div>
<div class="ttc" id="aclassAudioDecoder_html_a1d133c4a8a68d36ac504b27152c3301f"><div class="ttname"><a href="classAudioDecoder.html#a1d133c4a8a68d36ac504b27152c3301f">AudioDecoder::audio_data_</a></div><div class="ttdeci">QByteArray audio_data_</div><div class="ttdoc">The raw audio data provided in the constructor.</div><div class="ttdef"><b>Definition</b> audio_decoder.h:208</div></div>
<div class="ttc" id="aclassAudioDecoder_html_a1de7f54ae1cd81c77c546ee7b129c3cf"><div class="ttname"><a href="classAudioDecoder.html#a1de7f54ae1cd81c77c546ee7b129c3cf">AudioDecoder::audio_output_</a></div><div class="ttdeci">QAudioOutput * audio_output_</div><div class="ttdoc">Qt Multimedia object for audio output.</div><div class="ttdef"><b>Definition</b> audio_decoder.h:228</div></div>
<div class="ttc" id="aclassAudioDecoder_html_a213abc3ab9b148b2882fc6ed40e62758"><div class="ttname"><a href="classAudioDecoder.html#a213abc3ab9b148b2882fc6ed40e62758">AudioDecoder::seek_position_</a></div><div class="ttdeci">int64_t seek_position_</div><div class="ttdoc">Target timestamp for the pending seek operation (in stream timebase).</div><div class="ttdef"><b>Definition</b> audio_decoder.h:245</div></div>
<div class="ttc" id="aclassAudioDecoder_html_a22151d6b4208360dcebe8ad345f52df4"><div class="ttname"><a href="classAudioDecoder.html#a22151d6b4208360dcebe8ad345f52df4">AudioDecoder::wait_condition_</a></div><div class="ttdeci">QWaitCondition wait_condition_</div><div class="ttdoc">Condition variable used to pause/resume the decoding thread.</div><div class="ttdef"><b>Definition</b> audio_decoder.h:237</div></div>
<div class="ttc" id="aclassAudioDecoder_html_a2c52b21ceb52a95eae7f59bd012acfe6"><div class="ttname"><a href="classAudioDecoder.html#a2c52b21ceb52a95eae7f59bd012acfe6">AudioDecoder::Seek</a></div><div class="ttdeci">void Seek(double position)</div><div class="ttdoc">Seeks to a specific position in the audio stream. The position is specified in seconds....</div><div class="ttdef"><b>Definition</b> audio_decoder.cpp:274</div></div>
<div class="ttc" id="aclassAudioDecoder_html_a2c7cb37d97e97fdf6a93c17f8cd96516"><div class="ttname"><a href="classAudioDecoder.html#a2c7cb37d97e97fdf6a93c17f8cd96516">AudioDecoder::audio_codec_context_</a></div><div class="ttdeci">AVCodecContext * audio_codec_context_</div><div class="ttdoc">FFmpeg context for the audio codec.</div><div class="ttdef"><b>Definition</b> audio_decoder.h:217</div></div>
<div class="ttc" id="aclassAudioDecoder_html_a3f16fcfb1303426c4f870a7cb65c9509"><div class="ttname"><a href="classAudioDecoder.html#a3f16fcfb1303426c4f870a7cb65c9509">AudioDecoder::reached_end_of_stream_</a></div><div class="ttdeci">bool reached_end_of_stream_</div><div class="ttdoc">Flag indicating if the end of the audio stream has been reached.</div><div class="ttdef"><b>Definition</b> audio_decoder.h:249</div></div>
<div class="ttc" id="aclassAudioDecoder_html_a412416ae8d5a2153c14c6023a47ceb52"><div class="ttname"><a href="classAudioDecoder.html#a412416ae8d5a2153c14c6023a47ceb52">AudioDecoder::Initialize</a></div><div class="ttdeci">bool Initialize()</div><div class="ttdoc">Initializes the FFmpeg components and QAudioOutput for playback. Opens the input stream using the cus...</div><div class="ttdef"><b>Definition</b> audio_decoder.cpp:133</div></div>
<div class="ttc" id="aclassAudioDecoder_html_a46043f6510cb80d1c4c14a18f23ecee2"><div class="ttname"><a href="classAudioDecoder.html#a46043f6510cb80d1c4c14a18f23ecee2">AudioDecoder::run</a></div><div class="ttdeci">void run() override</div><div class="ttdoc">The main function executed by the QThread. Contains the loop that reads packets, decodes frames,...</div><div class="ttdef"><b>Definition</b> audio_decoder.cpp:319</div></div>
<div class="ttc" id="aclassAudioDecoder_html_a4c483a41bf7d57354b63bec009ac222e"><div class="ttname"><a href="classAudioDecoder.html#a4c483a41bf7d57354b63bec009ac222e">AudioDecoder::error</a></div><div class="ttdeci">void error(const QString &amp;message)</div><div class="ttdoc">Emitted when an error occurs during initialization or decoding.</div></div>
<div class="ttc" id="aclassAudioDecoder_html_a4f5e8f4dd5f45b60bc5ed68ccd8a90c3"><div class="ttname"><a href="classAudioDecoder.html#a4f5e8f4dd5f45b60bc5ed68ccd8a90c3">AudioDecoder::playbackFinished</a></div><div class="ttdeci">void playbackFinished()</div><div class="ttdoc">Emitted when the decoder reaches the end of the audio stream.</div></div>
<div class="ttc" id="aclassAudioDecoder_html_a56929dd4cbe490ee87de77ffbfc3aed2"><div class="ttname"><a href="classAudioDecoder.html#a56929dd4cbe490ee87de77ffbfc3aed2">AudioDecoder::GetVolume</a></div><div class="ttdeci">float GetVolume() const</div><div class="ttdoc">Gets the current playback volume. This operation is thread-safe.</div><div class="ttdef"><b>Definition</b> audio_decoder.cpp:128</div></div>
<div class="ttc" id="aclassAudioDecoder_html_a56d6ac5c37e7b5cffa1d913d5f7b6d01"><div class="ttname"><a href="classAudioDecoder.html#a56d6ac5c37e7b5cffa1d913d5f7b6d01">AudioDecoder::format_context_</a></div><div class="ttdeci">AVFormatContext * format_context_</div><div class="ttdoc">FFmpeg context for handling the container format.</div><div class="ttdef"><b>Definition</b> audio_decoder.h:213</div></div>
<div class="ttc" id="aclassAudioDecoder_html_a5a7db5853b0a13ceb2551114ecebff01"><div class="ttname"><a href="classAudioDecoder.html#a5a7db5853b0a13ceb2551114ecebff01">AudioDecoder::audio_device_</a></div><div class="ttdeci">QIODevice * audio_device_</div><div class="ttdoc">Qt I/O device associated with audio_output_, used for writing PCM data.</div><div class="ttdef"><b>Definition</b> audio_decoder.h:230</div></div>
<div class="ttc" id="aclassAudioDecoder_html_a5cf09a96a04ce8afd751d985c71e4211"><div class="ttname"><a href="classAudioDecoder.html#a5cf09a96a04ce8afd751d985c71e4211">AudioDecoder::AudioDecoder</a></div><div class="ttdeci">AudioDecoder(const QByteArray &amp;audio_data, QObject *parent=nullptr)</div><div class="ttdoc">Constructs an AudioDecoder object. Initializes internal state, allocates memory for FFmpeg&#39;s custom I...</div><div class="ttdef"><b>Definition</b> audio_decoder.cpp:9</div></div>
<div class="ttc" id="aclassAudioDecoder_html_a5f63aa27abafaeded80d3688638ace64"><div class="ttname"><a href="classAudioDecoder.html#a5f63aa27abafaeded80d3688638ace64">AudioDecoder::SeekPacket</a></div><div class="ttdeci">static int64_t SeekPacket(void *opaque, int64_t offset, int whence)</div><div class="ttdoc">Custom seek function for FFmpeg&#39;s AVIOContext. Adjusts the internal read_position_ based on the offse...</div><div class="ttdef"><b>Definition</b> audio_decoder.cpp:457</div></div>
<div class="ttc" id="aclassAudioDecoder_html_a66c187d6a3c0e49bf1be0ead9be415a5"><div class="ttname"><a href="classAudioDecoder.html#a66c187d6a3c0e49bf1be0ead9be415a5">AudioDecoder::DecodeAudioFrame</a></div><div class="ttdeci">void DecodeAudioFrame(const AVFrame *audio_frame) const</div><div class="ttdoc">Decodes a single audio frame using the FFmpeg resampler and writes the result to the audio device.</div><div class="ttdef"><b>Definition</b> audio_decoder.cpp:410</div></div>
<div class="ttc" id="aclassAudioDecoder_html_a6889d988c02106b114434bd895825c39"><div class="ttname"><a href="classAudioDecoder.html#a6889d988c02106b114434bd895825c39">AudioDecoder::~AudioDecoder</a></div><div class="ttdeci">~AudioDecoder() override</div><div class="ttdoc">Destructor. Stops the decoding thread, waits for it to finish, and releases all allocated resources.</div><div class="ttdef"><b>Definition</b> audio_decoder.cpp:43</div></div>
<div class="ttc" id="aclassAudioDecoder_html_a6948c3168d8c0c5a3badeeacf88f59bc"><div class="ttname"><a href="classAudioDecoder.html#a6948c3168d8c0c5a3badeeacf88f59bc">AudioDecoder::Reinitialize</a></div><div class="ttdeci">bool Reinitialize()</div><div class="ttdoc">Reinitializes the decoder after it has been stopped or encountered an error. Releases existing resour...</div><div class="ttdef"><b>Definition</b> audio_decoder.cpp:84</div></div>
<div class="ttc" id="aclassAudioDecoder_html_a70ae7be45d270a97159bd5f6c36c2ad8"><div class="ttname"><a href="classAudioDecoder.html#a70ae7be45d270a97159bd5f6c36c2ad8">AudioDecoder::audioInfo</a></div><div class="ttdeci">void audioInfo(int sample_rate, int channels, double duration)</div><div class="ttdoc">Emitted after successful initialization, providing audio stream details.</div></div>
<div class="ttc" id="aclassAudioDecoder_html_a7f2593257411d545771e2c6f786fe805"><div class="ttname"><a href="classAudioDecoder.html#a7f2593257411d545771e2c6f786fe805">AudioDecoder::current_position_</a></div><div class="ttdeci">double current_position_</div><div class="ttdoc">Current playback position in seconds.</div><div class="ttdef"><b>Definition</b> audio_decoder.h:247</div></div>
<div class="ttc" id="aclassAudioDecoder_html_a85648b024afb18583f516409b73c4ade"><div class="ttname"><a href="classAudioDecoder.html#a85648b024afb18583f516409b73c4ade">AudioDecoder::io_context_</a></div><div class="ttdeci">AVIOContext * io_context_</div><div class="ttdoc">FFmpeg context for custom I/O operations (reading from memory).</div><div class="ttdef"><b>Definition</b> audio_decoder.h:223</div></div>
<div class="ttc" id="aclassAudioDecoder_html_a8bc32886b0f43760450dbfcfc5e92082"><div class="ttname"><a href="classAudioDecoder.html#a8bc32886b0f43760450dbfcfc5e92082">AudioDecoder::audio_stream_</a></div><div class="ttdeci">int audio_stream_</div><div class="ttdoc">Index of the audio stream within the format context.</div><div class="ttdef"><b>Definition</b> audio_decoder.h:215</div></div>
<div class="ttc" id="aclassAudioDecoder_html_a928f569d98a91fae0fa27371a0c85b4e"><div class="ttname"><a href="classAudioDecoder.html#a928f569d98a91fae0fa27371a0c85b4e">AudioDecoder::positionChanged</a></div><div class="ttdeci">void positionChanged(double position)</div><div class="ttdoc">Emitted periodically during playback to indicate the current position.</div></div>
<div class="ttc" id="aclassAudioDecoder_html_a96c08186bab0125103062637bb881ec5"><div class="ttname"><a href="classAudioDecoder.html#a96c08186bab0125103062637bb881ec5">AudioDecoder::IsDecoderRunning</a></div><div class="ttdeci">bool IsDecoderRunning() const</div><div class="ttdoc">Checks if the decoding thread is currently running.</div><div class="ttdef"><b>Definition</b> audio_decoder.h:135</div></div>
<div class="ttc" id="aclassAudioDecoder_html_aa65c7d2e593ea818e894281a7fb70592"><div class="ttname"><a href="classAudioDecoder.html#aa65c7d2e593ea818e894281a7fb70592">AudioDecoder::seeking_</a></div><div class="ttdeci">bool seeking_</div><div class="ttdoc">Flag indicating if a seek operation is pending.</div><div class="ttdef"><b>Definition</b> audio_decoder.h:243</div></div>
<div class="ttc" id="aclassAudioDecoder_html_ab37425fc11616e98c4bb7ef38d42ebcb"><div class="ttname"><a href="classAudioDecoder.html#ab37425fc11616e98c4bb7ef38d42ebcb">AudioDecoder::audio_frame_</a></div><div class="ttdeci">AVFrame * audio_frame_</div><div class="ttdoc">FFmpeg frame structure to hold decoded audio data.</div><div class="ttdef"><b>Definition</b> audio_decoder.h:221</div></div>
<div class="ttc" id="aclassAudioDecoder_html_ab3e259ddc9fb0a51545b3fdfe7920f00"><div class="ttname"><a href="classAudioDecoder.html#ab3e259ddc9fb0a51545b3fdfe7920f00">AudioDecoder::IsPaused</a></div><div class="ttdeci">bool IsPaused() const</div><div class="ttdoc">Checks if the playback is currently paused. This operation is thread-safe.</div><div class="ttdef"><b>Definition</b> audio_decoder.cpp:269</div></div>
<div class="ttc" id="aclassAudioDecoder_html_ab41cfff77a236e3233a38406a3a4296a"><div class="ttname"><a href="classAudioDecoder.html#ab41cfff77a236e3233a38406a3a4296a">AudioDecoder::Pause</a></div><div class="ttdeci">void Pause()</div><div class="ttdoc">Toggles the paused state of the playback. If paused, playback stops; if unpaused, playback resumes....</div><div class="ttdef"><b>Definition</b> audio_decoder.cpp:260</div></div>
<div class="ttc" id="aclassAudioDecoder_html_ab9f4ee308d03bd9120488f300dc9ed55"><div class="ttname"><a href="classAudioDecoder.html#ab9f4ee308d03bd9120488f300dc9ed55">AudioDecoder::initialized_</a></div><div class="ttdeci">bool initialized_</div><div class="ttdoc">Flag indicating if the Initialize() method has completed successfully.</div><div class="ttdef"><b>Definition</b> audio_decoder.h:251</div></div>
<div class="ttc" id="aclassAudioDecoder_html_acb57c6389129229b4811f9221b91e8bd"><div class="ttname"><a href="classAudioDecoder.html#acb57c6389129229b4811f9221b91e8bd">AudioDecoder::Stop</a></div><div class="ttdeci">void Stop()</div><div class="ttdoc">Stops the decoding thread and playback gracefully. Sets the stopped_ flag and wakes the thread if it&#39;...</div><div class="ttdef"><b>Definition</b> audio_decoder.cpp:253</div></div>
<div class="ttc" id="aclassAudioDecoder_html_acc0ec0af4f9b1d462e024ec666c18ae3"><div class="ttname"><a href="classAudioDecoder.html#acc0ec0af4f9b1d462e024ec666c18ae3">AudioDecoder::audio_format_</a></div><div class="ttdeci">QAudioFormat audio_format_</div><div class="ttdoc">Qt audio format description (PCM S16LE stereo 44.1kHz).</div><div class="ttdef"><b>Definition</b> audio_decoder.h:232</div></div>
<div class="ttc" id="aclassAudioDecoder_html_ad0e74c589757bc53b9c1a72fb61f936e"><div class="ttname"><a href="classAudioDecoder.html#ad0e74c589757bc53b9c1a72fb61f936e">AudioDecoder::read_position_</a></div><div class="ttdeci">int read_position_</div><div class="ttdoc">Current read position within audio_data_ for the custom I/O context.</div><div class="ttdef"><b>Definition</b> audio_decoder.h:210</div></div>
<div class="ttc" id="aclassAudioDecoder_html_ad1c938bcc5cb7becf9d08865a1c09409"><div class="ttname"><a href="classAudioDecoder.html#ad1c938bcc5cb7becf9d08865a1c09409">AudioDecoder::ReleaseResources</a></div><div class="ttdeci">void ReleaseResources()</div><div class="ttdoc">Releases all FFmpeg and Qt Multimedia resources. Stops audio output, frees contexts (format,...</div><div class="ttdef"><b>Definition</b> audio_decoder.cpp:49</div></div>
<div class="ttc" id="aclassAudioDecoder_html_ad9d96652dd346dfa69aadf4ce9c77dee"><div class="ttname"><a href="classAudioDecoder.html#ad9d96652dd346dfa69aadf4ce9c77dee">AudioDecoder::paused_</a></div><div class="ttdeci">bool paused_</div><div class="ttdoc">Flag indicating if playback is currently paused.</div><div class="ttdef"><b>Definition</b> audio_decoder.h:241</div></div>
<div class="ttc" id="aclassAudioDecoder_html_ada7a06c4f71585633dbf9246c82564ca"><div class="ttname"><a href="classAudioDecoder.html#ada7a06c4f71585633dbf9246c82564ca">AudioDecoder::swr_context_</a></div><div class="ttdeci">SwrContext * swr_context_</div><div class="ttdoc">FFmpeg context for audio resampling (format/rate/channel conversion).</div><div class="ttdef"><b>Definition</b> audio_decoder.h:219</div></div>
<div class="ttc" id="aclassAudioDecoder_html_ae6bd0a0ddcf485aba6305427d4bd6825"><div class="ttname"><a href="classAudioDecoder.html#ae6bd0a0ddcf485aba6305427d4bd6825">AudioDecoder::SetVolume</a></div><div class="ttdeci">void SetVolume(float volume) const</div><div class="ttdoc">Sets the playback volume. The volume is a linear factor between 0.0 (silent) and 1....</div><div class="ttdef"><b>Definition</b> audio_decoder.cpp:121</div></div>
<div class="ttc" id="aclassAudioDecoder_html_af047c294f38efb8e18203b05f3c258b0"><div class="ttname"><a href="classAudioDecoder.html#af047c294f38efb8e18203b05f3c258b0">AudioDecoder::io_buffer_</a></div><div class="ttdeci">unsigned char * io_buffer_</div><div class="ttdoc">Buffer used by the custom I/O context to hold audio_data_.</div><div class="ttdef"><b>Definition</b> audio_decoder.h:225</div></div>
<div class="ttc" id="aclassAudioDecoder_html_afbc8e3bdffc473d8ca7a059dc30ce268"><div class="ttname"><a href="classAudioDecoder.html#afbc8e3bdffc473d8ca7a059dc30ce268">AudioDecoder::ReadPacket</a></div><div class="ttdeci">static int ReadPacket(void *opaque, uint8_t *buf, int buf_size)</div><div class="ttdoc">Custom read function for FFmpeg&#39;s AVIOContext. Reads data from the internal audio_data_ QByteArray bu...</div><div class="ttdef"><b>Definition</b> audio_decoder.cpp:443</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_905b439cb7102d88af5dfc588e5add64.html">chat</a></li><li class="navelem"><a class="el" href="dir_b7082f3c7a4f01cb8fc261661f9b5dc2.html">files</a></li><li class="navelem"><a class="el" href="dir_39d2e187056d37eb679b98413b1a31d5.html">audio</a></li><li class="navelem"><a class="el" href="dir_04329357cbe645fc2249015be931e6f1.html">decoder</a></li><li class="navelem"><a class="el" href="audio__decoder_8h.html">audio_decoder.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
