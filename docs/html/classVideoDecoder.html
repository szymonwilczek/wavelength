<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Wavelength: VideoDecoder Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Wavelength
   </div>
   <div id="projectbrief">Privacy-focused, cross-platform, and open-source communication application</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classVideoDecoder.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#signals">Signals</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pri-slots">Private Slots</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classVideoDecoder-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">VideoDecoder Class Reference<span class="mlabels"><span class="mlabel final">final</span></span></div></div>
</div><!--header-->
<div class="contents">

<p>Decodes video data frame by frame using FFmpeg libraries in a separate thread.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="video__decoder_8h_source.html">video_decoder.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for VideoDecoder:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classVideoDecoder__inherit__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Collaboration diagram for VideoDecoder:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classVideoDecoder__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="signals" name="signals"></a>
Signals</h2></td></tr>
<tr class="memitem:a51e7a40e369cc4e80033f1dd9068cdd4" id="r_a51e7a40e369cc4e80033f1dd9068cdd4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a51e7a40e369cc4e80033f1dd9068cdd4">error</a> (const QString &amp;message)</td></tr>
<tr class="memdesc:a51e7a40e369cc4e80033f1dd9068cdd4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Emitted when an error occurs during initialization or decoding.  <br /></td></tr>
<tr class="separator:a51e7a40e369cc4e80033f1dd9068cdd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2d7b995099a90908cf02630f9ce71ce" id="r_ac2d7b995099a90908cf02630f9ce71ce"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac2d7b995099a90908cf02630f9ce71ce">frameReady</a> (const QImage &amp;frame)</td></tr>
<tr class="memdesc:ac2d7b995099a90908cf02630f9ce71ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Emitted for each decoded video frame.  <br /></td></tr>
<tr class="separator:ac2d7b995099a90908cf02630f9ce71ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b36980122d8771e7aff1ed0c1db8420" id="r_a4b36980122d8771e7aff1ed0c1db8420"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4b36980122d8771e7aff1ed0c1db8420">playbackFinished</a> ()</td></tr>
<tr class="memdesc:a4b36980122d8771e7aff1ed0c1db8420"><td class="mdescLeft">&#160;</td><td class="mdescRight">Emitted when both video and audio (if present) streams reach the end.  <br /></td></tr>
<tr class="separator:a4b36980122d8771e7aff1ed0c1db8420"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72403db422317c2377fbf95fedd14077" id="r_a72403db422317c2377fbf95fedd14077"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a72403db422317c2377fbf95fedd14077">positionChanged</a> (double position)</td></tr>
<tr class="memdesc:a72403db422317c2377fbf95fedd14077"><td class="mdescLeft">&#160;</td><td class="mdescRight">Emitted periodically during playback to indicate the current position (based on audio if available, otherwise estimated).  <br /></td></tr>
<tr class="separator:a72403db422317c2377fbf95fedd14077"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0680707eda3a8c22786559ff45bdb46e" id="r_a0680707eda3a8c22786559ff45bdb46e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0680707eda3a8c22786559ff45bdb46e">videoInfo</a> (int width, int height, double fps, double duration, bool has_audio)</td></tr>
<tr class="memdesc:a0680707eda3a8c22786559ff45bdb46e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Emitted after successful initialization, providing video stream details.  <br /></td></tr>
<tr class="separator:a0680707eda3a8c22786559ff45bdb46e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8faedb4d698430fed469c3dc468e2ac2" id="r_a8faedb4d698430fed469c3dc468e2ac2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8faedb4d698430fed469c3dc468e2ac2">ExtractFirstFrame</a> ()</td></tr>
<tr class="memdesc:a8faedb4d698430fed469c3dc468e2ac2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronously extracts the first video frame from the data. Performs a separate, simplified FFmpeg initialization and decoding process to get the first frame quickly, typically for generating a thumbnail. Emits <a class="el" href="#ac2d7b995099a90908cf02630f9ce71ce" title="Emitted for each decoded video frame.">frameReady()</a> with the first frame upon success. This method runs in the calling thread.  <br /></td></tr>
<tr class="separator:a8faedb4d698430fed469c3dc468e2ac2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66788450264b9db4de2af594abb3930a" id="r_a66788450264b9db4de2af594abb3930a"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a66788450264b9db4de2af594abb3930a">GetVolume</a> () const</td></tr>
<tr class="memdesc:a66788450264b9db4de2af594abb3930a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the current playback volume (from the internal <a class="el" href="classAudioDecoder.html" title="Decodes and plays audio data using FFmpeg libraries in a separate thread.">AudioDecoder</a>). Returns 0.0 if there is no audio stream. This operation is thread-safe.  <br /></td></tr>
<tr class="separator:a66788450264b9db4de2af594abb3930a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97bfdada9e03663ee5f063b7eece3ad0" id="r_a97bfdada9e03663ee5f063b7eece3ad0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a97bfdada9e03663ee5f063b7eece3ad0">HasAudio</a> () const</td></tr>
<tr class="memdesc:a97bfdada9e03663ee5f063b7eece3ad0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the video file contains an audio stream.  <br /></td></tr>
<tr class="separator:a97bfdada9e03663ee5f063b7eece3ad0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8f8aabbe65727acd5ef5cfdc5f3b69b" id="r_aa8f8aabbe65727acd5ef5cfdc5f3b69b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa8f8aabbe65727acd5ef5cfdc5f3b69b">Initialize</a> ()</td></tr>
<tr class="memdesc:aa8f8aabbe65727acd5ef5cfdc5f3b69b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the FFmpeg components for decoding the video and potentially audio. Opens the input stream using the custom I/O context, finds video and audio streams, opens codecs, sets up the video scaler (to convert to RGB24), allocates frames/buffers. If audio is found, creates and connects to an internal <a class="el" href="classAudioDecoder.html" title="Decodes and plays audio data using FFmpeg libraries in a separate thread.">AudioDecoder</a> instance. Emits videoInfo upon success. This operation is thread-safe and should be called before starting the thread.  <br /></td></tr>
<tr class="separator:aa8f8aabbe65727acd5ef5cfdc5f3b69b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a272f809c339c83fe2af354511be254ac" id="r_a272f809c339c83fe2af354511be254ac"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a272f809c339c83fe2af354511be254ac">IsPaused</a> () const</td></tr>
<tr class="memdesc:a272f809c339c83fe2af354511be254ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the playback is currently paused. This operation is thread-safe.  <br /></td></tr>
<tr class="separator:a272f809c339c83fe2af354511be254ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d113f89caa403f6ff942369f3755b5b" id="r_a8d113f89caa403f6ff942369f3755b5b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8d113f89caa403f6ff942369f3755b5b">Pause</a> ()</td></tr>
<tr class="memdesc:a8d113f89caa403f6ff942369f3755b5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Toggles the paused state of the playback. If paused, playback stops; if unpaused, playback resumes. Also pauses/resumes the internal audio decoder (if present). Wakes the thread if it was waiting due to being paused. This operation is thread-safe.  <br /></td></tr>
<tr class="separator:a8d113f89caa403f6ff942369f3755b5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a901b35a51a3f87c6f8b3e02e3ab92a97" id="r_a901b35a51a3f87c6f8b3e02e3ab92a97"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a901b35a51a3f87c6f8b3e02e3ab92a97">ReleaseResources</a> ()</td></tr>
<tr class="memdesc:a901b35a51a3f87c6f8b3e02e3ab92a97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases all FFmpeg and internal <a class="el" href="classAudioDecoder.html" title="Decodes and plays audio data using FFmpeg libraries in a separate thread.">AudioDecoder</a> resources. Calls <a class="el" href="#a5a7e10221cb9faa6fd891a965feaaa25" title="Releases all FFmpeg resources (contexts, frames, scaler) and deletes the internal AudioDecoder....">CleanupFFmpegResources()</a>. This operation is thread-safe.  <br /></td></tr>
<tr class="separator:a901b35a51a3f87c6f8b3e02e3ab92a97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24223c882abedae8a754c9a2ba1df283" id="r_a24223c882abedae8a754c9a2ba1df283"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a24223c882abedae8a754c9a2ba1df283">Reset</a> ()</td></tr>
<tr class="memdesc:a24223c882abedae8a754c9a2ba1df283"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the playback position to the beginning of the video. Pauses playback, seeks both video and internal audio decoder (if present) to 0, resets internal state flags (finished, first frame), and wakes the thread. This operation is thread-safe.  <br /></td></tr>
<tr class="separator:a24223c882abedae8a754c9a2ba1df283"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a020f490d189f130ac41da321bb007586" id="r_a020f490d189f130ac41da321bb007586"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a020f490d189f130ac41da321bb007586">Seek</a> (double position)</td></tr>
<tr class="memdesc:a020f490d189f130ac41da321bb007586"><td class="mdescLeft">&#160;</td><td class="mdescRight">Seeks to a specific position in the video stream. Seeks the internal audio decoder (if present) and sets the seeking flag and target timestamp for the video stream. The actual video seek operation happens within the <a class="el" href="#a134b48e98d0b9db4011cfea08d0924da" title="The main function executed by the QThread. Contains the loop that reads packets, decodes video frames...">run()</a> loop. This operation is thread-safe.  <br /></td></tr>
<tr class="separator:a020f490d189f130ac41da321bb007586"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ff8ade137541839db123c17739481ac" id="r_a8ff8ade137541839db123c17739481ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8ff8ade137541839db123c17739481ac">SetVolume</a> (float volume) const</td></tr>
<tr class="memdesc:a8ff8ade137541839db123c17739481ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the playback volume (delegated to the internal <a class="el" href="classAudioDecoder.html" title="Decodes and plays audio data using FFmpeg libraries in a separate thread.">AudioDecoder</a>). Has no effect if there is no audio stream. This operation is thread-safe.  <br /></td></tr>
<tr class="separator:a8ff8ade137541839db123c17739481ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae8c25f59a45dd632b335cd72300f09b" id="r_aae8c25f59a45dd632b335cd72300f09b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aae8c25f59a45dd632b335cd72300f09b">Stop</a> ()</td></tr>
<tr class="memdesc:aae8c25f59a45dd632b335cd72300f09b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops the decoding thread and playback gracefully. Sets the stopped_ flag, stops the internal audio decoder (if present), and wakes the thread if it's waiting. The thread will then exit its run loop. This operation is thread-safe.  <br /></td></tr>
<tr class="separator:aae8c25f59a45dd632b335cd72300f09b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38321c72a85eca7115ab7b0b1fe5ac7a" id="r_a38321c72a85eca7115ab7b0b1fe5ac7a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a38321c72a85eca7115ab7b0b1fe5ac7a">VideoDecoder</a> (const QByteArray &amp;video_data, QObject *parent=nullptr)</td></tr>
<tr class="memdesc:a38321c72a85eca7115ab7b0b1fe5ac7a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a <a class="el" href="classVideoDecoder.html" title="Decodes video data frame by frame using FFmpeg libraries in a separate thread.">VideoDecoder</a> object. Initializes internal state, allocates memory for FFmpeg's custom I/O context, sets up the QBuffer for reading from the provided video data.  <br /></td></tr>
<tr class="separator:a38321c72a85eca7115ab7b0b1fe5ac7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98c4c55212f768b295079d016f5e05d7" id="r_a98c4c55212f768b295079d016f5e05d7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a98c4c55212f768b295079d016f5e05d7">~VideoDecoder</a> () override</td></tr>
<tr class="memdesc:a98c4c55212f768b295079d016f5e05d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor. Stops the decoding thread, waits for it to finish, and releases all allocated resources.  <br /></td></tr>
<tr class="separator:a98c4c55212f768b295079d016f5e05d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a134b48e98d0b9db4011cfea08d0924da" id="r_a134b48e98d0b9db4011cfea08d0924da"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a134b48e98d0b9db4011cfea08d0924da">run</a> () override</td></tr>
<tr class="memdesc:a134b48e98d0b9db4011cfea08d0924da"><td class="mdescLeft">&#160;</td><td class="mdescRight">The main function executed by the QThread. Contains the loop that reads packets, decodes video frames, handles seeking/pausing, synchronizes with the internal audio decoder (if present) or uses frame timing, and emits decoded frames via the frameReady signal.  <br /></td></tr>
<tr class="separator:a134b48e98d0b9db4011cfea08d0924da"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-slots" name="pri-slots"></a>
Private Slots</h2></td></tr>
<tr class="memitem:a18dedd90eb28ae766eb81d523625f766" id="r_a18dedd90eb28ae766eb81d523625f766"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a18dedd90eb28ae766eb81d523625f766">HandleAudioError</a> (const QString &amp;message)</td></tr>
<tr class="memdesc:a18dedd90eb28ae766eb81d523625f766"><td class="mdescLeft">&#160;</td><td class="mdescRight">Slot connected to the internal <a class="el" href="classAudioDecoder.html" title="Decodes and plays audio data using FFmpeg libraries in a separate thread.">AudioDecoder</a>'s error signal. Relays the audio error message via the main <a class="el" href="#a51e7a40e369cc4e80033f1dd9068cdd4" title="Emitted when an error occurs during initialization or decoding.">error()</a> signal.  <br /></td></tr>
<tr class="separator:a18dedd90eb28ae766eb81d523625f766"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d72ecfc50eab41a6e14a1a46feaa7df" id="r_a2d72ecfc50eab41a6e14a1a46feaa7df"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2d72ecfc50eab41a6e14a1a46feaa7df">HandleAudioFinished</a> ()</td></tr>
<tr class="memdesc:a2d72ecfc50eab41a6e14a1a46feaa7df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Slot connected to the internal <a class="el" href="classAudioDecoder.html" title="Decodes and plays audio data using FFmpeg libraries in a separate thread.">AudioDecoder</a>'s playbackFinished signal. Sets the audio_finished_ flag and emits the main <a class="el" href="#a4b36980122d8771e7aff1ed0c1db8420" title="Emitted when both video and audio (if present) streams reach the end.">playbackFinished()</a> signal if the video stream has also finished.  <br /></td></tr>
<tr class="separator:a2d72ecfc50eab41a6e14a1a46feaa7df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef861f701b488c253cb44f72eeb93831" id="r_aef861f701b488c253cb44f72eeb93831"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aef861f701b488c253cb44f72eeb93831">UpdateAudioPosition</a> (double position)</td></tr>
<tr class="memdesc:aef861f701b488c253cb44f72eeb93831"><td class="mdescLeft">&#160;</td><td class="mdescRight">Slot connected to the internal <a class="el" href="classAudioDecoder.html" title="Decodes and plays audio data using FFmpeg libraries in a separate thread.">AudioDecoder</a>'s positionChanged signal. Updates the internal current_audio_position_ and emits the main <a class="el" href="#a72403db422317c2377fbf95fedd14077" title="Emitted periodically during playback to indicate the current position (based on audio if available,...">positionChanged()</a> signal.  <br /></td></tr>
<tr class="separator:aef861f701b488c253cb44f72eeb93831"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a5a7e10221cb9faa6fd891a965feaaa25" id="r_a5a7e10221cb9faa6fd891a965feaaa25"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5a7e10221cb9faa6fd891a965feaaa25">CleanupFFmpegResources</a> ()</td></tr>
<tr class="memdesc:a5a7e10221cb9faa6fd891a965feaaa25"><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases all FFmpeg resources (contexts, frames, scaler) and deletes the internal <a class="el" href="classAudioDecoder.html" title="Decodes and plays audio data using FFmpeg libraries in a separate thread.">AudioDecoder</a>. Resets internal state variables related to FFmpeg and audio.  <br /></td></tr>
<tr class="separator:a5a7e10221cb9faa6fd891a965feaaa25"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-methods" name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:a8462c72da3486c3c93af01d90f60e7d5" id="r_a8462c72da3486c3c93af01d90f60e7d5"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8462c72da3486c3c93af01d90f60e7d5">ReadPacket</a> (void *opaque, uint8_t *buf, int buf_size)</td></tr>
<tr class="memdesc:a8462c72da3486c3c93af01d90f60e7d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Custom read function for FFmpeg's AVIOContext. Reads data from the internal QBuffer (buffer_).  <br /></td></tr>
<tr class="separator:a8462c72da3486c3c93af01d90f60e7d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb14e8c4ad3db91e7171125a4d7be37f" id="r_afb14e8c4ad3db91e7171125a4d7be37f"><td class="memItemLeft" align="right" valign="top">static int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afb14e8c4ad3db91e7171125a4d7be37f">SeekPacket</a> (void *opaque, int64_t offset, int whence)</td></tr>
<tr class="memdesc:afb14e8c4ad3db91e7171125a4d7be37f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Custom seek function for FFmpeg's AVIOContext. Adjusts the position within the internal QBuffer (buffer_). Supports SEEK_SET and AVSEEK_SIZE.  <br /></td></tr>
<tr class="separator:afb14e8c4ad3db91e7171125a4d7be37f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a32663adee70792639f50244e11cda813" id="r_a32663adee70792639f50244e11cda813"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classAudioDecoder.html">AudioDecoder</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a32663adee70792639f50244e11cda813">audio_decoder_</a> = nullptr</td></tr>
<tr class="memdesc:a32663adee70792639f50244e11cda813"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to the internal <a class="el" href="classAudioDecoder.html" title="Decodes and plays audio data using FFmpeg libraries in a separate thread.">AudioDecoder</a> instance (if audio stream exists).  <br /></td></tr>
<tr class="separator:a32663adee70792639f50244e11cda813"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82ca7287b3498cb5c1a471651a24f724" id="r_a82ca7287b3498cb5c1a471651a24f724"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a82ca7287b3498cb5c1a471651a24f724">audio_finished_</a> = false</td></tr>
<tr class="memdesc:a82ca7287b3498cb5c1a471651a24f724"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag indicating if the internal <a class="el" href="classAudioDecoder.html" title="Decodes and plays audio data using FFmpeg libraries in a separate thread.">AudioDecoder</a> has finished playback. Access protected by mutex_.  <br /></td></tr>
<tr class="separator:a82ca7287b3498cb5c1a471651a24f724"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a308315c3312f155946c513273a0b9317" id="r_a308315c3312f155946c513273a0b9317"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a308315c3312f155946c513273a0b9317">audio_initialized_</a> = false</td></tr>
<tr class="memdesc:a308315c3312f155946c513273a0b9317"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag indicating if the internal <a class="el" href="classAudioDecoder.html" title="Decodes and plays audio data using FFmpeg libraries in a separate thread.">AudioDecoder</a> has been successfully initialized.  <br /></td></tr>
<tr class="separator:a308315c3312f155946c513273a0b9317"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a784c4df001fc009c4005d18973add96f" id="r_a784c4df001fc009c4005d18973add96f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a784c4df001fc009c4005d18973add96f">audio_stream_index_</a> = -1</td></tr>
<tr class="memdesc:a784c4df001fc009c4005d18973add96f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Index of the audio stream within the format context.  <br /></td></tr>
<tr class="separator:a784c4df001fc009c4005d18973add96f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa81ba19332e0a19eb208d39337801d6" id="r_afa81ba19332e0a19eb208d39337801d6"><td class="memItemLeft" align="right" valign="top">QBuffer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afa81ba19332e0a19eb208d39337801d6">buffer_</a></td></tr>
<tr class="memdesc:afa81ba19332e0a19eb208d39337801d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">QBuffer used by FFmpeg's custom I/O context to read video_data_.  <br /></td></tr>
<tr class="separator:afa81ba19332e0a19eb208d39337801d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdd13f9fe1099afac22de8bffb895ee7" id="r_abdd13f9fe1099afac22de8bffb895ee7"><td class="memItemLeft" align="right" valign="top">AVCodecContext *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abdd13f9fe1099afac22de8bffb895ee7">codec_context_</a> = nullptr</td></tr>
<tr class="memdesc:abdd13f9fe1099afac22de8bffb895ee7"><td class="mdescLeft">&#160;</td><td class="mdescRight">FFmpeg context for the video codec.  <br /></td></tr>
<tr class="separator:abdd13f9fe1099afac22de8bffb895ee7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04f51de4427b8fe1380d3fc02b624b60" id="r_a04f51de4427b8fe1380d3fc02b624b60"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a04f51de4427b8fe1380d3fc02b624b60">current_audio_position_</a> = 0.0</td></tr>
<tr class="memdesc:a04f51de4427b8fe1380d3fc02b624b60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current playback position reported by the internal <a class="el" href="classAudioDecoder.html" title="Decodes and plays audio data using FFmpeg libraries in a separate thread.">AudioDecoder</a>. Access protected by mutex_.  <br /></td></tr>
<tr class="separator:a04f51de4427b8fe1380d3fc02b624b60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a037453f710ee9ae2c14b3c5ca793a634" id="r_a037453f710ee9ae2c14b3c5ca793a634"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a037453f710ee9ae2c14b3c5ca793a634">current_position_</a> = 0.0</td></tr>
<tr class="memdesc:a037453f710ee9ae2c14b3c5ca793a634"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current estimated playback position in seconds (used if no audio).  <br /></td></tr>
<tr class="separator:a037453f710ee9ae2c14b3c5ca793a634"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add9addd3b6171019f6af10fc84e8a123" id="r_add9addd3b6171019f6af10fc84e8a123"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#add9addd3b6171019f6af10fc84e8a123">duration_</a> = 0.0</td></tr>
<tr class="memdesc:add9addd3b6171019f6af10fc84e8a123"><td class="mdescLeft">&#160;</td><td class="mdescRight">Total duration of the video in seconds.  <br /></td></tr>
<tr class="separator:add9addd3b6171019f6af10fc84e8a123"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae93cc86c90dd86f84c342699515c93de" id="r_ae93cc86c90dd86f84c342699515c93de"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae93cc86c90dd86f84c342699515c93de">first_frame_</a> = true</td></tr>
<tr class="memdesc:ae93cc86c90dd86f84c342699515c93de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag indicating if the current frame is the first one after start/seek.  <br /></td></tr>
<tr class="separator:ae93cc86c90dd86f84c342699515c93de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae77ec03ac3e66a4bf87d0de91cbd9511" id="r_ae77ec03ac3e66a4bf87d0de91cbd9511"><td class="memItemLeft" align="right" valign="top">AVFormatContext *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae77ec03ac3e66a4bf87d0de91cbd9511">format_context_</a> = nullptr</td></tr>
<tr class="memdesc:ae77ec03ac3e66a4bf87d0de91cbd9511"><td class="mdescLeft">&#160;</td><td class="mdescRight">FFmpeg context for handling the container format (e.g., MP4, WebM).  <br /></td></tr>
<tr class="separator:ae77ec03ac3e66a4bf87d0de91cbd9511"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4881186ef78a4fff3ea0f25e26cc5dc2" id="r_a4881186ef78a4fff3ea0f25e26cc5dc2"><td class="memItemLeft" align="right" valign="top">AVFrame *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4881186ef78a4fff3ea0f25e26cc5dc2">frame_</a> = nullptr</td></tr>
<tr class="memdesc:a4881186ef78a4fff3ea0f25e26cc5dc2"><td class="mdescLeft">&#160;</td><td class="mdescRight">FFmpeg frame structure to hold decoded video data.  <br /></td></tr>
<tr class="separator:a4881186ef78a4fff3ea0f25e26cc5dc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a689a825edd60301a6ffde8c78bf2b325" id="r_a689a825edd60301a6ffde8c78bf2b325"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a689a825edd60301a6ffde8c78bf2b325">frame_rate_</a> = 0.0</td></tr>
<tr class="memdesc:a689a825edd60301a6ffde8c78bf2b325"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculated average frame rate of the video in frames per second.  <br /></td></tr>
<tr class="separator:a689a825edd60301a6ffde8c78bf2b325"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4555b0f45eb75921292a664dc071b1b" id="r_ac4555b0f45eb75921292a664dc071b1b"><td class="memItemLeft" align="right" valign="top">QElapsedTimer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac4555b0f45eb75921292a664dc071b1b">frame_timer_</a></td></tr>
<tr class="memdesc:ac4555b0f45eb75921292a664dc071b1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timer used for frame timing synchronization when no audio is present.  <br /></td></tr>
<tr class="separator:ac4555b0f45eb75921292a664dc071b1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac89dce9c9b7428b05f9c02ec0b9a122e" id="r_ac89dce9c9b7428b05f9c02ec0b9a122e"><td class="memItemLeft" align="right" valign="top">AVIOContext *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac89dce9c9b7428b05f9c02ec0b9a122e">io_context_</a> = nullptr</td></tr>
<tr class="memdesc:ac89dce9c9b7428b05f9c02ec0b9a122e"><td class="mdescLeft">&#160;</td><td class="mdescRight">FFmpeg context for custom I/O operations (reading from memory).  <br /></td></tr>
<tr class="separator:ac89dce9c9b7428b05f9c02ec0b9a122e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bb90465816f306788c8e6cebbc8a9ea" id="r_a6bb90465816f306788c8e6cebbc8a9ea"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6bb90465816f306788c8e6cebbc8a9ea">last_frame_pts_</a> = AV_NOPTS_VALUE</td></tr>
<tr class="memdesc:a6bb90465816f306788c8e6cebbc8a9ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Presentation timestamp (PTS) of the previously decoded frame (used for frame timing).  <br /></td></tr>
<tr class="separator:a6bb90465816f306788c8e6cebbc8a9ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fda035a5bded638784256260fa209aa" id="r_a0fda035a5bded638784256260fa209aa"><td class="memItemLeft" align="right" valign="top">QMutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0fda035a5bded638784256260fa209aa">mutex_</a></td></tr>
<tr class="memdesc:a0fda035a5bded638784256260fa209aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mutex protecting access to shared state variables (paused_, stopped_, seeking_, etc.).  <br /></td></tr>
<tr class="separator:a0fda035a5bded638784256260fa209aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b6edc981003320d2e11fecdbf96086a" id="r_a1b6edc981003320d2e11fecdbf96086a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1b6edc981003320d2e11fecdbf96086a">paused_</a> = false</td></tr>
<tr class="memdesc:a1b6edc981003320d2e11fecdbf96086a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag indicating if playback is currently paused. Access protected by mutex_.  <br /></td></tr>
<tr class="separator:a1b6edc981003320d2e11fecdbf96086a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fa88b0077d95a5618abd21f50190e9e" id="r_a8fa88b0077d95a5618abd21f50190e9e"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8fa88b0077d95a5618abd21f50190e9e">seek_position_</a> = -1</td></tr>
<tr class="memdesc:a8fa88b0077d95a5618abd21f50190e9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Target timestamp (in video stream timebase) for the pending seek operation. Access protected by mutex_.  <br /></td></tr>
<tr class="separator:a8fa88b0077d95a5618abd21f50190e9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43e0e9664121df634350de8571254248" id="r_a43e0e9664121df634350de8571254248"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a43e0e9664121df634350de8571254248">seeking_</a> = false</td></tr>
<tr class="memdesc:a43e0e9664121df634350de8571254248"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag indicating if a seek operation is pending. Access protected by mutex_.  <br /></td></tr>
<tr class="separator:a43e0e9664121df634350de8571254248"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42f3acd73603f28a31bbd142108b782b" id="r_a42f3acd73603f28a31bbd142108b782b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a42f3acd73603f28a31bbd142108b782b">stopped_</a> = false</td></tr>
<tr class="memdesc:a42f3acd73603f28a31bbd142108b782b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag indicating if the thread should stop execution. Access protected by mutex_.  <br /></td></tr>
<tr class="separator:a42f3acd73603f28a31bbd142108b782b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3e3ec3d051156416548407836427629" id="r_ad3e3ec3d051156416548407836427629"><td class="memItemLeft" align="right" valign="top">SwsContext *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad3e3ec3d051156416548407836427629">sws_context_</a> = nullptr</td></tr>
<tr class="memdesc:ad3e3ec3d051156416548407836427629"><td class="mdescLeft">&#160;</td><td class="mdescRight">FFmpeg context for image scaling and pixel format conversion (to RGB24).  <br /></td></tr>
<tr class="separator:ad3e3ec3d051156416548407836427629"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd543e29d2aee440b157d3999048852e" id="r_abd543e29d2aee440b157d3999048852e"><td class="memItemLeft" align="right" valign="top">QByteArray&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abd543e29d2aee440b157d3999048852e">video_data_</a></td></tr>
<tr class="memdesc:abd543e29d2aee440b157d3999048852e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The raw video data provided in the constructor.  <br /></td></tr>
<tr class="separator:abd543e29d2aee440b157d3999048852e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52cfa36ca8972d0dd6363e19f1530d5f" id="r_a52cfa36ca8972d0dd6363e19f1530d5f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a52cfa36ca8972d0dd6363e19f1530d5f">video_finished_</a> = false</td></tr>
<tr class="memdesc:a52cfa36ca8972d0dd6363e19f1530d5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag indicating if the video stream has reached the end. Access protected by mutex_.  <br /></td></tr>
<tr class="separator:a52cfa36ca8972d0dd6363e19f1530d5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1acf721bb0dfa85e3489447dbdf7cc4f" id="r_a1acf721bb0dfa85e3489447dbdf7cc4f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1acf721bb0dfa85e3489447dbdf7cc4f">video_stream_</a> = -1</td></tr>
<tr class="memdesc:a1acf721bb0dfa85e3489447dbdf7cc4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Index of the video stream within the format context.  <br /></td></tr>
<tr class="separator:a1acf721bb0dfa85e3489447dbdf7cc4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80a14382e4561751ac387cb82fcc5ebd" id="r_a80a14382e4561751ac387cb82fcc5ebd"><td class="memItemLeft" align="right" valign="top">QWaitCondition&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a80a14382e4561751ac387cb82fcc5ebd">wait_condition_</a></td></tr>
<tr class="memdesc:a80a14382e4561751ac387cb82fcc5ebd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Condition variable used to pause/resume the decoding thread.  <br /></td></tr>
<tr class="separator:a80a14382e4561751ac387cb82fcc5ebd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Decodes video data frame by frame using FFmpeg libraries in a separate thread. </p>
<p>This class takes raw video data (e.g., MP4, WebM) as a QByteArray, uses FFmpeg (libavformat, libavcodec, libswscale) to decode the video stream, and emits each decoded frame as a QImage (Format_RGB888). If an audio stream is present, it uses an internal <a class="el" href="classAudioDecoder.html" title="Decodes and plays audio data using FFmpeg libraries in a separate thread.">AudioDecoder</a> instance to handle audio decoding and playback synchronization.</p>
<p>The decoding loop runs in a separate QThread to avoid blocking the main UI thread. It supports pausing, resuming, seeking, volume control (via the internal <a class="el" href="classAudioDecoder.html" title="Decodes and plays audio data using FFmpeg libraries in a separate thread.">AudioDecoder</a>), and provides signals for status updates (errors, info, position, frames, finish). It uses a custom AVIOContext to read data directly from the QByteArray in memory. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a38321c72a85eca7115ab7b0b1fe5ac7a" name="a38321c72a85eca7115ab7b0b1fe5ac7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38321c72a85eca7115ab7b0b1fe5ac7a">&#9670;&#160;</a></span>VideoDecoder()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">VideoDecoder::VideoDecoder </td>
          <td>(</td>
          <td class="paramtype">const QByteArray &amp;</td>          <td class="paramname"><span class="paramname"><em>video_data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QObject *</td>          <td class="paramname"><span class="paramname"><em>parent</em></span><span class="paramdefsep"> = </span><span class="paramdefval">nullptr</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel explicit">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs a <a class="el" href="classVideoDecoder.html" title="Decodes video data frame by frame using FFmpeg libraries in a separate thread.">VideoDecoder</a> object. Initializes internal state, allocates memory for FFmpeg's custom I/O context, sets up the QBuffer for reading from the provided video data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">video_data</td><td>The raw video data to be decoded. </td></tr>
    <tr><td class="paramname">parent</td><td>Optional parent QObject. </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classVideoDecoder_a38321c72a85eca7115ab7b0b1fe5ac7a_cgraph.svg" width="434" height="86"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a98c4c55212f768b295079d016f5e05d7" name="a98c4c55212f768b295079d016f5e05d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98c4c55212f768b295079d016f5e05d7">&#9670;&#160;</a></span>~VideoDecoder()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">VideoDecoder::~VideoDecoder </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel override">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor. Stops the decoding thread, waits for it to finish, and releases all allocated resources. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classVideoDecoder_a98c4c55212f768b295079d016f5e05d7_cgraph.svg" width="468" height="99"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a5a7e10221cb9faa6fd891a965feaaa25" name="a5a7e10221cb9faa6fd891a965feaaa25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a7e10221cb9faa6fd891a965feaaa25">&#9670;&#160;</a></span>CleanupFFmpegResources()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VideoDecoder::CleanupFFmpegResources </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Releases all FFmpeg resources (contexts, frames, scaler) and deletes the internal <a class="el" href="classAudioDecoder.html" title="Decodes and plays audio data using FFmpeg libraries in a separate thread.">AudioDecoder</a>. Resets internal state variables related to FFmpeg and audio. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classVideoDecoder_a5a7e10221cb9faa6fd891a965feaaa25_icgraph.svg" width="487" height="86"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a51e7a40e369cc4e80033f1dd9068cdd4" name="a51e7a40e369cc4e80033f1dd9068cdd4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51e7a40e369cc4e80033f1dd9068cdd4">&#9670;&#160;</a></span>error</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VideoDecoder::error </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;</td>          <td class="paramname"><span class="paramname"><em>message</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel signal">signal</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Emitted when an error occurs during initialization or decoding. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td>A description of the error. </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classVideoDecoder_a51e7a40e369cc4e80033f1dd9068cdd4_icgraph.svg" width="100%" height="412"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a8faedb4d698430fed469c3dc468e2ac2" name="a8faedb4d698430fed469c3dc468e2ac2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8faedb4d698430fed469c3dc468e2ac2">&#9670;&#160;</a></span>ExtractFirstFrame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VideoDecoder::ExtractFirstFrame </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Synchronously extracts the first video frame from the data. Performs a separate, simplified FFmpeg initialization and decoding process to get the first frame quickly, typically for generating a thumbnail. Emits <a class="el" href="#ac2d7b995099a90908cf02630f9ce71ce" title="Emitted for each decoded video frame.">frameReady()</a> with the first frame upon success. This method runs in the calling thread. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classVideoDecoder_a8faedb4d698430fed469c3dc468e2ac2_cgraph.svg" width="420" height="135"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ac2d7b995099a90908cf02630f9ce71ce" name="ac2d7b995099a90908cf02630f9ce71ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2d7b995099a90908cf02630f9ce71ce">&#9670;&#160;</a></span>frameReady</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VideoDecoder::frameReady </td>
          <td>(</td>
          <td class="paramtype">const QImage &amp;</td>          <td class="paramname"><span class="paramname"><em>frame</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel signal">signal</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Emitted for each decoded video frame. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">frame</td><td>The decoded frame as a QImage (Format_RGB888). A copy is emitted. </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classVideoDecoder_ac2d7b995099a90908cf02630f9ce71ce_icgraph.svg" width="100%" height="458"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a66788450264b9db4de2af594abb3930a" name="a66788450264b9db4de2af594abb3930a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66788450264b9db4de2af594abb3930a">&#9670;&#160;</a></span>GetVolume()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float VideoDecoder::GetVolume </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the current playback volume (from the internal <a class="el" href="classAudioDecoder.html" title="Decodes and plays audio data using FFmpeg libraries in a separate thread.">AudioDecoder</a>). Returns 0.0 if there is no audio stream. This operation is thread-safe. </p>
<dl class="section return"><dt>Returns</dt><dd>The current volume level (0.0 to 1.0). </dd></dl>

</div>
</div>
<a id="a18dedd90eb28ae766eb81d523625f766" name="a18dedd90eb28ae766eb81d523625f766"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18dedd90eb28ae766eb81d523625f766">&#9670;&#160;</a></span>HandleAudioError</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VideoDecoder::HandleAudioError </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;</td>          <td class="paramname"><span class="paramname"><em>message</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel private">private</span><span class="mlabel slot">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Slot connected to the internal <a class="el" href="classAudioDecoder.html" title="Decodes and plays audio data using FFmpeg libraries in a separate thread.">AudioDecoder</a>'s error signal. Relays the audio error message via the main <a class="el" href="#a51e7a40e369cc4e80033f1dd9068cdd4" title="Emitted when an error occurs during initialization or decoding.">error()</a> signal. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td>The error message from the <a class="el" href="classAudioDecoder.html" title="Decodes and plays audio data using FFmpeg libraries in a separate thread.">AudioDecoder</a>. </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classVideoDecoder_a18dedd90eb28ae766eb81d523625f766_cgraph.svg" width="382" height="50"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classVideoDecoder_a18dedd90eb28ae766eb81d523625f766_icgraph.svg" width="580" height="50"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a2d72ecfc50eab41a6e14a1a46feaa7df" name="a2d72ecfc50eab41a6e14a1a46feaa7df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d72ecfc50eab41a6e14a1a46feaa7df">&#9670;&#160;</a></span>HandleAudioFinished</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VideoDecoder::HandleAudioFinished </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span><span class="mlabel slot">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Slot connected to the internal <a class="el" href="classAudioDecoder.html" title="Decodes and plays audio data using FFmpeg libraries in a separate thread.">AudioDecoder</a>'s playbackFinished signal. Sets the audio_finished_ flag and emits the main <a class="el" href="#a4b36980122d8771e7aff1ed0c1db8420" title="Emitted when both video and audio (if present) streams reach the end.">playbackFinished()</a> signal if the video stream has also finished. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classVideoDecoder_a2d72ecfc50eab41a6e14a1a46feaa7df_cgraph.svg" width="456" height="50"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classVideoDecoder_a2d72ecfc50eab41a6e14a1a46feaa7df_icgraph.svg" width="580" height="50"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a97bfdada9e03663ee5f063b7eece3ad0" name="a97bfdada9e03663ee5f063b7eece3ad0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97bfdada9e03663ee5f063b7eece3ad0">&#9670;&#160;</a></span>HasAudio()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool VideoDecoder::HasAudio </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if the video file contains an audio stream. </p>
<dl class="section return"><dt>Returns</dt><dd>True if an audio stream was detected during initialization, false otherwise. </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classVideoDecoder_a97bfdada9e03663ee5f063b7eece3ad0_icgraph.svg" width="563" height="184"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aa8f8aabbe65727acd5ef5cfdc5f3b69b" name="aa8f8aabbe65727acd5ef5cfdc5f3b69b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8f8aabbe65727acd5ef5cfdc5f3b69b">&#9670;&#160;</a></span>Initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool VideoDecoder::Initialize </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the FFmpeg components for decoding the video and potentially audio. Opens the input stream using the custom I/O context, finds video and audio streams, opens codecs, sets up the video scaler (to convert to RGB24), allocates frames/buffers. If audio is found, creates and connects to an internal <a class="el" href="classAudioDecoder.html" title="Decodes and plays audio data using FFmpeg libraries in a separate thread.">AudioDecoder</a> instance. Emits videoInfo upon success. This operation is thread-safe and should be called before starting the thread. </p>
<dl class="section return"><dt>Returns</dt><dd>True if initialization was successful, false otherwise. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classVideoDecoder_aa8f8aabbe65727acd5ef5cfdc5f3b69b_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classVideoDecoder_aa8f8aabbe65727acd5ef5cfdc5f3b69b_icgraph.svg" width="347" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a272f809c339c83fe2af354511be254ac" name="a272f809c339c83fe2af354511be254ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a272f809c339c83fe2af354511be254ac">&#9670;&#160;</a></span>IsPaused()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool VideoDecoder::IsPaused </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if the playback is currently paused. This operation is thread-safe. </p>
<dl class="section return"><dt>Returns</dt><dd>True if paused, false otherwise. </dd></dl>

</div>
</div>
<a id="a8d113f89caa403f6ff942369f3755b5b" name="a8d113f89caa403f6ff942369f3755b5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d113f89caa403f6ff942369f3755b5b">&#9670;&#160;</a></span>Pause()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VideoDecoder::Pause </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Toggles the paused state of the playback. If paused, playback stops; if unpaused, playback resumes. Also pauses/resumes the internal audio decoder (if present). Wakes the thread if it was waiting due to being paused. This operation is thread-safe. </p>

</div>
</div>
<a id="a4b36980122d8771e7aff1ed0c1db8420" name="a4b36980122d8771e7aff1ed0c1db8420"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b36980122d8771e7aff1ed0c1db8420">&#9670;&#160;</a></span>playbackFinished</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VideoDecoder::playbackFinished </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel signal">signal</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Emitted when both video and audio (if present) streams reach the end. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classVideoDecoder_a4b36980122d8771e7aff1ed0c1db8420_icgraph.svg" width="100%" height="424"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a72403db422317c2377fbf95fedd14077" name="a72403db422317c2377fbf95fedd14077"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72403db422317c2377fbf95fedd14077">&#9670;&#160;</a></span>positionChanged</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VideoDecoder::positionChanged </td>
          <td>(</td>
          <td class="paramtype">double</td>          <td class="paramname"><span class="paramname"><em>position</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel signal">signal</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Emitted periodically during playback to indicate the current position (based on audio if available, otherwise estimated). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">position</td><td>The current playback position in seconds. </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classVideoDecoder_a72403db422317c2377fbf95fedd14077_icgraph.svg" width="100%" height="406"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a8462c72da3486c3c93af01d90f60e7d5" name="a8462c72da3486c3c93af01d90f60e7d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8462c72da3486c3c93af01d90f60e7d5">&#9670;&#160;</a></span>ReadPacket()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int VideoDecoder::ReadPacket </td>
          <td>(</td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>opaque</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>buf</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>buf_size</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Custom read function for FFmpeg's AVIOContext. Reads data from the internal QBuffer (buffer_). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">opaque</td><td>Pointer to the QBuffer instance. </td></tr>
    <tr><td class="paramname">buf</td><td>Buffer to read data into. </td></tr>
    <tr><td class="paramname">buf_size</td><td>Size of the buffer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of bytes read, or 0 if the end of buffer is reached. </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classVideoDecoder_a8462c72da3486c3c93af01d90f60e7d5_icgraph.svg" width="434" height="99"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a901b35a51a3f87c6f8b3e02e3ab92a97" name="a901b35a51a3f87c6f8b3e02e3ab92a97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a901b35a51a3f87c6f8b3e02e3ab92a97">&#9670;&#160;</a></span>ReleaseResources()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VideoDecoder::ReleaseResources </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Releases all FFmpeg and internal <a class="el" href="classAudioDecoder.html" title="Decodes and plays audio data using FFmpeg libraries in a separate thread.">AudioDecoder</a> resources. Calls <a class="el" href="#a5a7e10221cb9faa6fd891a965feaaa25" title="Releases all FFmpeg resources (contexts, frames, scaler) and deletes the internal AudioDecoder....">CleanupFFmpegResources()</a>. This operation is thread-safe. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classVideoDecoder_a901b35a51a3f87c6f8b3e02e3ab92a97_cgraph.svg" width="487" height="50"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a24223c882abedae8a754c9a2ba1df283" name="a24223c882abedae8a754c9a2ba1df283"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24223c882abedae8a754c9a2ba1df283">&#9670;&#160;</a></span>Reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VideoDecoder::Reset </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resets the playback position to the beginning of the video. Pauses playback, seeks both video and internal audio decoder (if present) to 0, resets internal state flags (finished, first frame), and wakes the thread. This operation is thread-safe. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classVideoDecoder_a24223c882abedae8a754c9a2ba1df283_cgraph.svg" width="372" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a134b48e98d0b9db4011cfea08d0924da" name="a134b48e98d0b9db4011cfea08d0924da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a134b48e98d0b9db4011cfea08d0924da">&#9670;&#160;</a></span>run()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VideoDecoder::run </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel override">override</span><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The main function executed by the QThread. Contains the loop that reads packets, decodes video frames, handles seeking/pausing, synchronizes with the internal audio decoder (if present) or uses frame timing, and emits decoded frames via the frameReady signal. </p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classVideoDecoder_a134b48e98d0b9db4011cfea08d0924da_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a020f490d189f130ac41da321bb007586" name="a020f490d189f130ac41da321bb007586"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a020f490d189f130ac41da321bb007586">&#9670;&#160;</a></span>Seek()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VideoDecoder::Seek </td>
          <td>(</td>
          <td class="paramtype">double</td>          <td class="paramname"><span class="paramname"><em>position</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Seeks to a specific position in the video stream. Seeks the internal audio decoder (if present) and sets the seeking flag and target timestamp for the video stream. The actual video seek operation happens within the <a class="el" href="#a134b48e98d0b9db4011cfea08d0924da" title="The main function executed by the QThread. Contains the loop that reads packets, decodes video frames...">run()</a> loop. This operation is thread-safe. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">position</td><td>The target position in seconds from the beginning of the video. </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classVideoDecoder_a020f490d189f130ac41da321bb007586_cgraph.svg" width="368" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="afb14e8c4ad3db91e7171125a4d7be37f" name="afb14e8c4ad3db91e7171125a4d7be37f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb14e8c4ad3db91e7171125a4d7be37f">&#9670;&#160;</a></span>SeekPacket()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t VideoDecoder::SeekPacket </td>
          <td>(</td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>opaque</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t</td>          <td class="paramname"><span class="paramname"><em>offset</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>whence</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Custom seek function for FFmpeg's AVIOContext. Adjusts the position within the internal QBuffer (buffer_). Supports SEEK_SET and AVSEEK_SIZE. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">opaque</td><td>Pointer to the QBuffer instance. </td></tr>
    <tr><td class="paramname">offset</td><td>The offset to seek to/by. </td></tr>
    <tr><td class="paramname">whence</td><td>The seeking mode (SEEK_SET, AVSEEK_SIZE). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The new buffer position, or the total size if whence is AVSEEK_SIZE, or -1 on error. </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classVideoDecoder_afb14e8c4ad3db91e7171125a4d7be37f_icgraph.svg" width="434" height="99"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a8ff8ade137541839db123c17739481ac" name="a8ff8ade137541839db123c17739481ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ff8ade137541839db123c17739481ac">&#9670;&#160;</a></span>SetVolume()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VideoDecoder::SetVolume </td>
          <td>(</td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>volume</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the playback volume (delegated to the internal <a class="el" href="classAudioDecoder.html" title="Decodes and plays audio data using FFmpeg libraries in a separate thread.">AudioDecoder</a>). Has no effect if there is no audio stream. This operation is thread-safe. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">volume</td><td>The desired volume level (0.0 to 1.0). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aae8c25f59a45dd632b335cd72300f09b" name="aae8c25f59a45dd632b335cd72300f09b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae8c25f59a45dd632b335cd72300f09b">&#9670;&#160;</a></span>Stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VideoDecoder::Stop </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stops the decoding thread and playback gracefully. Sets the stopped_ flag, stops the internal audio decoder (if present), and wakes the thread if it's waiting. The thread will then exit its run loop. This operation is thread-safe. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classVideoDecoder_aae8c25f59a45dd632b335cd72300f09b_icgraph.svg" width="399" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aef861f701b488c253cb44f72eeb93831" name="aef861f701b488c253cb44f72eeb93831"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef861f701b488c253cb44f72eeb93831">&#9670;&#160;</a></span>UpdateAudioPosition</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VideoDecoder::UpdateAudioPosition </td>
          <td>(</td>
          <td class="paramtype">double</td>          <td class="paramname"><span class="paramname"><em>position</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span><span class="mlabel slot">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Slot connected to the internal <a class="el" href="classAudioDecoder.html" title="Decodes and plays audio data using FFmpeg libraries in a separate thread.">AudioDecoder</a>'s positionChanged signal. Updates the internal current_audio_position_ and emits the main <a class="el" href="#a72403db422317c2377fbf95fedd14077" title="Emitted periodically during playback to indicate the current position (based on audio if available,...">positionChanged()</a> signal. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">position</td><td>The current audio playback position in seconds. </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classVideoDecoder_aef861f701b488c253cb44f72eeb93831_cgraph.svg" width="454" height="50"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classVideoDecoder_aef861f701b488c253cb44f72eeb93831_icgraph.svg" width="582" height="50"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a0680707eda3a8c22786559ff45bdb46e" name="a0680707eda3a8c22786559ff45bdb46e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0680707eda3a8c22786559ff45bdb46e">&#9670;&#160;</a></span>videoInfo</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VideoDecoder::videoInfo </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>width</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>height</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double</td>          <td class="paramname"><span class="paramname"><em>fps</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double</td>          <td class="paramname"><span class="paramname"><em>duration</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>has_audio</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel signal">signal</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Emitted after successful initialization, providing video stream details. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">width</td><td>The width of the video in pixels. </td></tr>
    <tr><td class="paramname">height</td><td>The height of the video in pixels. </td></tr>
    <tr><td class="paramname">fps</td><td>The calculated average frame rate in frames per second. </td></tr>
    <tr><td class="paramname">duration</td><td>The total duration of the video in seconds. </td></tr>
    <tr><td class="paramname">has_audio</td><td>True if an audio stream was detected, false otherwise. </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classVideoDecoder_a0680707eda3a8c22786559ff45bdb46e_icgraph.svg" width="100%" height="383"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a32663adee70792639f50244e11cda813" name="a32663adee70792639f50244e11cda813"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32663adee70792639f50244e11cda813">&#9670;&#160;</a></span>audio_decoder_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classAudioDecoder.html">AudioDecoder</a>* VideoDecoder::audio_decoder_ = nullptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pointer to the internal <a class="el" href="classAudioDecoder.html" title="Decodes and plays audio data using FFmpeg libraries in a separate thread.">AudioDecoder</a> instance (if audio stream exists). </p>

</div>
</div>
<a id="a82ca7287b3498cb5c1a471651a24f724" name="a82ca7287b3498cb5c1a471651a24f724"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82ca7287b3498cb5c1a471651a24f724">&#9670;&#160;</a></span>audio_finished_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool VideoDecoder::audio_finished_ = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flag indicating if the internal <a class="el" href="classAudioDecoder.html" title="Decodes and plays audio data using FFmpeg libraries in a separate thread.">AudioDecoder</a> has finished playback. Access protected by mutex_. </p>

</div>
</div>
<a id="a308315c3312f155946c513273a0b9317" name="a308315c3312f155946c513273a0b9317"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a308315c3312f155946c513273a0b9317">&#9670;&#160;</a></span>audio_initialized_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool VideoDecoder::audio_initialized_ = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flag indicating if the internal <a class="el" href="classAudioDecoder.html" title="Decodes and plays audio data using FFmpeg libraries in a separate thread.">AudioDecoder</a> has been successfully initialized. </p>

</div>
</div>
<a id="a784c4df001fc009c4005d18973add96f" name="a784c4df001fc009c4005d18973add96f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a784c4df001fc009c4005d18973add96f">&#9670;&#160;</a></span>audio_stream_index_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int VideoDecoder::audio_stream_index_ = -1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Index of the audio stream within the format context. </p>

</div>
</div>
<a id="afa81ba19332e0a19eb208d39337801d6" name="afa81ba19332e0a19eb208d39337801d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa81ba19332e0a19eb208d39337801d6">&#9670;&#160;</a></span>buffer_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QBuffer VideoDecoder::buffer_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>QBuffer used by FFmpeg's custom I/O context to read video_data_. </p>

</div>
</div>
<a id="abdd13f9fe1099afac22de8bffb895ee7" name="abdd13f9fe1099afac22de8bffb895ee7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdd13f9fe1099afac22de8bffb895ee7">&#9670;&#160;</a></span>codec_context_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">AVCodecContext* VideoDecoder::codec_context_ = nullptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>FFmpeg context for the video codec. </p>

</div>
</div>
<a id="a04f51de4427b8fe1380d3fc02b624b60" name="a04f51de4427b8fe1380d3fc02b624b60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04f51de4427b8fe1380d3fc02b624b60">&#9670;&#160;</a></span>current_audio_position_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double VideoDecoder::current_audio_position_ = 0.0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Current playback position reported by the internal <a class="el" href="classAudioDecoder.html" title="Decodes and plays audio data using FFmpeg libraries in a separate thread.">AudioDecoder</a>. Access protected by mutex_. </p>

</div>
</div>
<a id="a037453f710ee9ae2c14b3c5ca793a634" name="a037453f710ee9ae2c14b3c5ca793a634"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a037453f710ee9ae2c14b3c5ca793a634">&#9670;&#160;</a></span>current_position_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double VideoDecoder::current_position_ = 0.0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Current estimated playback position in seconds (used if no audio). </p>

</div>
</div>
<a id="add9addd3b6171019f6af10fc84e8a123" name="add9addd3b6171019f6af10fc84e8a123"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add9addd3b6171019f6af10fc84e8a123">&#9670;&#160;</a></span>duration_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double VideoDecoder::duration_ = 0.0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Total duration of the video in seconds. </p>

</div>
</div>
<a id="ae93cc86c90dd86f84c342699515c93de" name="ae93cc86c90dd86f84c342699515c93de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae93cc86c90dd86f84c342699515c93de">&#9670;&#160;</a></span>first_frame_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool VideoDecoder::first_frame_ = true</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flag indicating if the current frame is the first one after start/seek. </p>

</div>
</div>
<a id="ae77ec03ac3e66a4bf87d0de91cbd9511" name="ae77ec03ac3e66a4bf87d0de91cbd9511"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae77ec03ac3e66a4bf87d0de91cbd9511">&#9670;&#160;</a></span>format_context_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">AVFormatContext* VideoDecoder::format_context_ = nullptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>FFmpeg context for handling the container format (e.g., MP4, WebM). </p>

</div>
</div>
<a id="a4881186ef78a4fff3ea0f25e26cc5dc2" name="a4881186ef78a4fff3ea0f25e26cc5dc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4881186ef78a4fff3ea0f25e26cc5dc2">&#9670;&#160;</a></span>frame_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">AVFrame* VideoDecoder::frame_ = nullptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>FFmpeg frame structure to hold decoded video data. </p>

</div>
</div>
<a id="a689a825edd60301a6ffde8c78bf2b325" name="a689a825edd60301a6ffde8c78bf2b325"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a689a825edd60301a6ffde8c78bf2b325">&#9670;&#160;</a></span>frame_rate_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double VideoDecoder::frame_rate_ = 0.0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculated average frame rate of the video in frames per second. </p>

</div>
</div>
<a id="ac4555b0f45eb75921292a664dc071b1b" name="ac4555b0f45eb75921292a664dc071b1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4555b0f45eb75921292a664dc071b1b">&#9670;&#160;</a></span>frame_timer_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QElapsedTimer VideoDecoder::frame_timer_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Timer used for frame timing synchronization when no audio is present. </p>

</div>
</div>
<a id="ac89dce9c9b7428b05f9c02ec0b9a122e" name="ac89dce9c9b7428b05f9c02ec0b9a122e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac89dce9c9b7428b05f9c02ec0b9a122e">&#9670;&#160;</a></span>io_context_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">AVIOContext* VideoDecoder::io_context_ = nullptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>FFmpeg context for custom I/O operations (reading from memory). </p>

</div>
</div>
<a id="a6bb90465816f306788c8e6cebbc8a9ea" name="a6bb90465816f306788c8e6cebbc8a9ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bb90465816f306788c8e6cebbc8a9ea">&#9670;&#160;</a></span>last_frame_pts_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t VideoDecoder::last_frame_pts_ = AV_NOPTS_VALUE</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Presentation timestamp (PTS) of the previously decoded frame (used for frame timing). </p>

</div>
</div>
<a id="a0fda035a5bded638784256260fa209aa" name="a0fda035a5bded638784256260fa209aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fda035a5bded638784256260fa209aa">&#9670;&#160;</a></span>mutex_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QMutex VideoDecoder::mutex_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel mutable">mutable</span><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mutex protecting access to shared state variables (paused_, stopped_, seeking_, etc.). </p>

</div>
</div>
<a id="a1b6edc981003320d2e11fecdbf96086a" name="a1b6edc981003320d2e11fecdbf96086a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b6edc981003320d2e11fecdbf96086a">&#9670;&#160;</a></span>paused_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool VideoDecoder::paused_ = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flag indicating if playback is currently paused. Access protected by mutex_. </p>

</div>
</div>
<a id="a8fa88b0077d95a5618abd21f50190e9e" name="a8fa88b0077d95a5618abd21f50190e9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8fa88b0077d95a5618abd21f50190e9e">&#9670;&#160;</a></span>seek_position_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t VideoDecoder::seek_position_ = -1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Target timestamp (in video stream timebase) for the pending seek operation. Access protected by mutex_. </p>

</div>
</div>
<a id="a43e0e9664121df634350de8571254248" name="a43e0e9664121df634350de8571254248"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43e0e9664121df634350de8571254248">&#9670;&#160;</a></span>seeking_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool VideoDecoder::seeking_ = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flag indicating if a seek operation is pending. Access protected by mutex_. </p>

</div>
</div>
<a id="a42f3acd73603f28a31bbd142108b782b" name="a42f3acd73603f28a31bbd142108b782b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42f3acd73603f28a31bbd142108b782b">&#9670;&#160;</a></span>stopped_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool VideoDecoder::stopped_ = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flag indicating if the thread should stop execution. Access protected by mutex_. </p>

</div>
</div>
<a id="ad3e3ec3d051156416548407836427629" name="ad3e3ec3d051156416548407836427629"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3e3ec3d051156416548407836427629">&#9670;&#160;</a></span>sws_context_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">SwsContext* VideoDecoder::sws_context_ = nullptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>FFmpeg context for image scaling and pixel format conversion (to RGB24). </p>

</div>
</div>
<a id="abd543e29d2aee440b157d3999048852e" name="abd543e29d2aee440b157d3999048852e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd543e29d2aee440b157d3999048852e">&#9670;&#160;</a></span>video_data_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QByteArray VideoDecoder::video_data_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The raw video data provided in the constructor. </p>

</div>
</div>
<a id="a52cfa36ca8972d0dd6363e19f1530d5f" name="a52cfa36ca8972d0dd6363e19f1530d5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52cfa36ca8972d0dd6363e19f1530d5f">&#9670;&#160;</a></span>video_finished_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool VideoDecoder::video_finished_ = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flag indicating if the video stream has reached the end. Access protected by mutex_. </p>

</div>
</div>
<a id="a1acf721bb0dfa85e3489447dbdf7cc4f" name="a1acf721bb0dfa85e3489447dbdf7cc4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1acf721bb0dfa85e3489447dbdf7cc4f">&#9670;&#160;</a></span>video_stream_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int VideoDecoder::video_stream_ = -1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Index of the video stream within the format context. </p>

</div>
</div>
<a id="a80a14382e4561751ac387cb82fcc5ebd" name="a80a14382e4561751ac387cb82fcc5ebd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80a14382e4561751ac387cb82fcc5ebd">&#9670;&#160;</a></span>wait_condition_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QWaitCondition VideoDecoder::wait_condition_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel private">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Condition variable used to pause/resume the decoding thread. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/chat/files/video/decoder/<a class="el" href="video__decoder_8h_source.html">video_decoder.h</a></li>
<li>src/chat/files/video/decoder/<a class="el" href="video__decoder_8cpp.html">video_decoder.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classVideoDecoder.html">VideoDecoder</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
