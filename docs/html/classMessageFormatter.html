<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Wavelength: MessageFormatter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Wavelength
   </div>
   <div id="projectbrief">Privacy-focused, cross-platform, and open-source communication application</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classMessageFormatter.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classMessageFormatter-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">MessageFormatter Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Provides static utility functions for formatting messages into HTML strings.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="message__formatter_8h_source.html">message_formatter.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for MessageFormatter:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classMessageFormatter__coll__graph.svg" width="242" height="170"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:aba1b17bacccda04d3b63fdb0ea4fddab" id="r_aba1b17bacccda04d3b63fdb0ea4fddab"><td class="memItemLeft" align="right" valign="top">static QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aba1b17bacccda04d3b63fdb0ea4fddab">FormatFileSize</a> (qint64 size_in_bytes)</td></tr>
<tr class="memdesc:aba1b17bacccda04d3b63fdb0ea4fddab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Formats a file size in bytes into a human-readable string (e.g., "1.2 MB").  <br /></td></tr>
<tr class="separator:aba1b17bacccda04d3b63fdb0ea4fddab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3a717bfa398187a653410d3febeb9cb" id="r_af3a717bfa398187a653410d3febeb9cb"><td class="memItemLeft" align="right" valign="top">static QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af3a717bfa398187a653410d3febeb9cb">FormatMessage</a> (const QJsonObject &amp;message_object, const QString &amp;frequency)</td></tr>
<tr class="memdesc:af3a717bfa398187a653410d3febeb9cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Formats a message represented by a JSON object into an HTML string.  <br /></td></tr>
<tr class="separator:af3a717bfa398187a653410d3febeb9cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88534a822f6f08f08d70360bbbbe912f" id="r_a88534a822f6f08f08d70360bbbbe912f"><td class="memItemLeft" align="right" valign="top">static QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a88534a822f6f08f08d70360bbbbe912f">FormatSystemMessage</a> (const QString &amp;message)</td></tr>
<tr class="memdesc:a88534a822f6f08f08d70360bbbbe912f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Formats a simple string as a system message.  <br /></td></tr>
<tr class="separator:a88534a822f6f08f08d70360bbbbe912f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Provides static utility functions for formatting messages into HTML strings. </p>
<p>This class handles the conversion of message data (from JSON objects or simple strings) into HTML suitable for display in the chat interface. It manages timestamps, sender identification, text formatting, and attachment handling (using placeholders). </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="aba1b17bacccda04d3b63fdb0ea4fddab" name="aba1b17bacccda04d3b63fdb0ea4fddab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba1b17bacccda04d3b63fdb0ea4fddab">&#9670;&#160;</a></span>FormatFileSize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QString MessageFormatter::FormatFileSize </td>
          <td>(</td>
          <td class="paramtype">qint64</td>          <td class="paramname"><span class="paramname"><em>size_in_bytes</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Formats a file size in bytes into a human-readable string (e.g., "1.2 MB"). </p>
<p>Converts the byte count into KB, MB, or GB with appropriate precision.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size_in_bytes</td><td>The file size in bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A QString representing the formatted file size. </dd></dl>

</div>
</div>
<a id="af3a717bfa398187a653410d3febeb9cb" name="af3a717bfa398187a653410d3febeb9cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3a717bfa398187a653410d3febeb9cb">&#9670;&#160;</a></span>FormatMessage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QString MessageFormatter::FormatMessage </td>
          <td>(</td>
          <td class="paramtype">const QJsonObject &amp;</td>          <td class="paramname"><span class="paramname"><em>message_object</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QString &amp;</td>          <td class="paramname"><span class="paramname"><em>frequency</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Formats a message represented by a JSON object into an HTML string. </p>
<p>Extracts sender, content, timestamp, and attachment information from the JSON. Determines if the message is from the current user ("You"). For attachments, it stores the base64 data (if present and not already stored) in the <a class="el" href="classAttachmentDataStore.html" title="Manages temporary storage of attachment data using a singleton pattern.">AttachmentDataStore</a> and generates an HTML placeholder div element. This placeholder contains <code>data-*</code> attributes (like <code>data-attachment-id</code>, <code>data-mime-type</code>, <code>data-filename</code>) that reference the stored data, keeping the HTML itself lightweight. For text messages, it formats the content with appropriate sender info and timestamp.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">message_object</td><td>The JSON object containing the message details. Expected keys include "content", "sender"/"senderId", "timestamp", "isSelf", "hasAttachment", "attachmentType", "attachmentName", "attachmentMimeType", "attachmentData". </td></tr>
    <tr><td class="paramname">frequency</td><td>The frequency identifier, used to look up sender names via <a class="el" href="classWavelengthRegistry.html" title="Singleton registry managing active and pending wavelength connections and their associated informatio...">WavelengthRegistry</a> if only senderId is present. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An HTML formatted QString representing the message. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="classMessageFormatter_af3a717bfa398187a653410d3febeb9cb_cgraph.svg" width="595" height="363"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classMessageFormatter_af3a717bfa398187a653410d3febeb9cb_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a88534a822f6f08f08d70360bbbbe912f" name="a88534a822f6f08f08d70360bbbbe912f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88534a822f6f08f08d70360bbbbe912f">&#9670;&#160;</a></span>FormatSystemMessage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QString MessageFormatter::FormatSystemMessage </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;</td>          <td class="paramname"><span class="paramname"><em>message</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Formats a simple string as a system message. </p>
<p>Prepends the current timestamp and applies specific styling (yellow color) to the message text.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td>The text content of the system message. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An HTML formatted QString representing the system message. </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classMessageFormatter_a88534a822f6f08f08d70360bbbbe912f_icgraph.svg" width="100%" height="384"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/chat/messages/formatter/<a class="el" href="message__formatter_8h_source.html">message_formatter.h</a></li>
<li>src/chat/messages/formatter/<a class="el" href="message__formatter_8cpp.html">message_formatter.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classMessageFormatter.html">MessageFormatter</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
