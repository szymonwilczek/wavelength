<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Wavelength: MovingState Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Wavelength
   </div>
   <div id="projectbrief">Privacy-focused, cross-platform, and open-source communication application</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classMovingState.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classMovingState-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">MovingState Class Reference<span class="mlabels"><span class="mlabel final">final</span></span></div></div>
</div><!--header-->
<div class="contents">

<p>Implements the Moving state behavior for the Blob animation.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="moving__state_8h_source.html">moving_state.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for MovingState:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classMovingState__inherit__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div class="dynheader">
Collaboration diagram for MovingState:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="classMovingState__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa9effe019f9b8eb6df5df28878c9d7ec" id="r_aa9effe019f9b8eb6df5df28878c9d7ec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa9effe019f9b8eb6df5df28878c9d7ec">Apply</a> (std::vector&lt; QPointF &gt; &amp;control_points, std::vector&lt; QPointF &gt; &amp;velocity, QPointF &amp;blob_center, const <a class="el" href="structBlobConfig_1_1BlobParameters.html">BlobConfig::BlobParameters</a> &amp;params) override</td></tr>
<tr class="memdesc:aa9effe019f9b8eb6df5df28878c9d7ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Applies a stretching effect to the blob based on its average internal velocity. Calculates the average velocity of all control points and applies a force to each point in that direction, scaled by the point's distance from the center. This creates a visual stretch or "smear" effect when the blob is moving internally.  <br /></td></tr>
<tr class="separator:aa9effe019f9b8eb6df5df28878c9d7ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af21546ef1305a08f50d24cde30fc602a" id="r_af21546ef1305a08f50d24cde30fc602a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af21546ef1305a08f50d24cde30fc602a">ApplyForce</a> (const QVector2D &amp;force, std::vector&lt; QPointF &gt; &amp;velocity, QPointF &amp;blob_center, const std::vector&lt; QPointF &gt; &amp;control_points, double blob_radius) override</td></tr>
<tr class="memdesc:af21546ef1305a08f50d24cde30fc602a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Applies an external force directly to the blob's velocity and center. The force applied to each control point's velocity is scaled based on its distance from the center. A portion of the force is also applied directly to the blob's center position.  <br /></td></tr>
<tr class="separator:af21546ef1305a08f50d24cde30fc602a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad81c8034bc50f454d96e06689c1c4714" id="r_ad81c8034bc50f454d96e06689c1c4714"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad81c8034bc50f454d96e06689c1c4714">MovingState</a> ()</td></tr>
<tr class="memdesc:ad81c8034bc50f454d96e06689c1c4714"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor for <a class="el" href="classMovingState.html" title="Implements the Moving state behavior for the Blob animation.">MovingState</a>.  <br /></td></tr>
<tr class="separator:ad81c8034bc50f454d96e06689c1c4714"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classBlobState"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pub_methods_classBlobState')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classBlobState.html">BlobState</a></td></tr>
<tr class="memitem:a8a8486408ac43e86d018f8160b5524b4 inherit pub_methods_classBlobState" id="r_a8a8486408ac43e86d018f8160b5524b4"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBlobState.html#a8a8486408ac43e86d018f8160b5524b4">~BlobState</a> ()=default</td></tr>
<tr class="memdesc:a8a8486408ac43e86d018f8160b5524b4 inherit pub_methods_classBlobState"><td class="mdescLeft">&#160;</td><td class="mdescRight">Virtual destructor. Ensures proper cleanup when deleting derived state objects through a base class pointer.  <br /></td></tr>
<tr class="separator:a8a8486408ac43e86d018f8160b5524b4 inherit pub_methods_classBlobState"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a256ab7915db2566f64b680984e7eb942" id="r_a256ab7915db2566f64b680984e7eb942"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a256ab7915db2566f64b680984e7eb942">ApplyInertiaForce</a> (std::vector&lt; QPointF &gt; &amp;velocity, QPointF &amp;blob_center, const std::vector&lt; QPointF &gt; &amp;control_points, double blob_radius, const QVector2D &amp;window_velocity)</td></tr>
<tr class="memdesc:a256ab7915db2566f64b680984e7eb942"><td class="mdescLeft">&#160;</td><td class="mdescRight">Applies an inertia force based on the calculated window velocity. This static method is typically called by the <a class="el" href="classBlobTransitionManager.html" title="Manages transitions and movement analysis for the Blob animation based on window events.">BlobTransitionManager</a> when significant window movement is detected. It applies a force opposite to the window's velocity to the blob's control points and center, simulating inertia. The force magnitude is scaled based on window speed and point distance from the center. Includes optimizations like pre-calculation and early exit for low speeds.  <br /></td></tr>
<tr class="separator:a256ab7915db2566f64b680984e7eb942"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implements the Moving state behavior for the Blob animation. </p>
<p>This state is active when the application window is being moved. It applies forces to the blob based on the window's velocity (inertia) and also introduces a stretching effect in the direction of the blob's internal average velocity. External forces are applied more directly compared to the Idle state. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ad81c8034bc50f454d96e06689c1c4714" name="ad81c8034bc50f454d96e06689c1c4714"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad81c8034bc50f454d96e06689c1c4714">&#9670;&#160;</a></span>MovingState()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">MovingState::MovingState </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel default">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Default constructor for <a class="el" href="classMovingState.html" title="Implements the Moving state behavior for the Blob animation.">MovingState</a>. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aa9effe019f9b8eb6df5df28878c9d7ec" name="aa9effe019f9b8eb6df5df28878c9d7ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9effe019f9b8eb6df5df28878c9d7ec">&#9670;&#160;</a></span>Apply()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MovingState::Apply </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; QPointF &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>control_points</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; QPointF &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>velocity</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QPointF &amp;</td>          <td class="paramname"><span class="paramname"><em>blob_center</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structBlobConfig_1_1BlobParameters.html">BlobConfig::BlobParameters</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>params</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel override">override</span><span class="mlabel virtual">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Applies a stretching effect to the blob based on its average internal velocity. Calculates the average velocity of all control points and applies a force to each point in that direction, scaled by the point's distance from the center. This creates a visual stretch or "smear" effect when the blob is moving internally. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">control_points</td><td>Reference to the vector of current control point positions (read-only). </td></tr>
    <tr><td class="paramname">velocity</td><td>Reference to the vector of current control point velocities (modified). </td></tr>
    <tr><td class="paramname">blob_center</td><td>The current center position of the blob (read-only). </td></tr>
    <tr><td class="paramname">params</td><td>Blob appearance parameters (read-only, used for radius). </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classBlobState.html#a7c3befdbdbe36602a59d17d4742b10b8">BlobState</a>.</p>

</div>
</div>
<a id="af21546ef1305a08f50d24cde30fc602a" name="af21546ef1305a08f50d24cde30fc602a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af21546ef1305a08f50d24cde30fc602a">&#9670;&#160;</a></span>ApplyForce()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MovingState::ApplyForce </td>
          <td>(</td>
          <td class="paramtype">const QVector2D &amp;</td>          <td class="paramname"><span class="paramname"><em>force</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; QPointF &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>velocity</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QPointF &amp;</td>          <td class="paramname"><span class="paramname"><em>blob_center</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; QPointF &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>control_points</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double</td>          <td class="paramname"><span class="paramname"><em>blob_radius</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel override">override</span><span class="mlabel virtual">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Applies an external force directly to the blob's velocity and center. The force applied to each control point's velocity is scaled based on its distance from the center. A portion of the force is also applied directly to the blob's center position. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">force</td><td>The external force vector to apply. </td></tr>
    <tr><td class="paramname">velocity</td><td>Reference to the vector of current control point velocities (modified). </td></tr>
    <tr><td class="paramname">blob_center</td><td>Reference to the blob's center position (modified). </td></tr>
    <tr><td class="paramname">control_points</td><td>Reference to the vector of current control point positions (read-only, used for distance calculation). </td></tr>
    <tr><td class="paramname">blob_radius</td><td>The current average radius of the blob (read-only, used for scaling). </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classBlobState.html#ae5d732fdaeb29ec9eaceda089de23511">BlobState</a>.</p>

</div>
</div>
<a id="a256ab7915db2566f64b680984e7eb942" name="a256ab7915db2566f64b680984e7eb942"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a256ab7915db2566f64b680984e7eb942">&#9670;&#160;</a></span>ApplyInertiaForce()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MovingState::ApplyInertiaForce </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; QPointF &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>velocity</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QPointF &amp;</td>          <td class="paramname"><span class="paramname"><em>blob_center</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; QPointF &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>control_points</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double</td>          <td class="paramname"><span class="paramname"><em>blob_radius</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QVector2D &amp;</td>          <td class="paramname"><span class="paramname"><em>window_velocity</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Applies an inertia force based on the calculated window velocity. This static method is typically called by the <a class="el" href="classBlobTransitionManager.html" title="Manages transitions and movement analysis for the Blob animation based on window events.">BlobTransitionManager</a> when significant window movement is detected. It applies a force opposite to the window's velocity to the blob's control points and center, simulating inertia. The force magnitude is scaled based on window speed and point distance from the center. Includes optimizations like pre-calculation and early exit for low speeds. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">velocity</td><td>Reference to the vector of current control point velocities (modified). </td></tr>
    <tr><td class="paramname">blob_center</td><td>Reference to the blob's center position (modified). </td></tr>
    <tr><td class="paramname">control_points</td><td>Reference to the vector of current control point positions (read-only). </td></tr>
    <tr><td class="paramname">blob_radius</td><td>The current average radius of the blob (read-only). </td></tr>
    <tr><td class="paramname">window_velocity</td><td>The calculated velocity vector of the application window. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/blob/states/<a class="el" href="moving__state_8h_source.html">moving_state.h</a></li>
<li>src/blob/states/<a class="el" href="moving__state_8cpp.html">moving_state.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classMovingState.html">MovingState</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
